{"version":3,"sources":["core.js","sy-autofocus.js","sy-autoscroll.js","sy-beep.js","sy-hideKeyboard.js","sy-imageonload.js","sy-img.js","sy-msgNotify.js","sy-usercount.js","sy-geoHelper.js","sy-msgHelper.js","sy-posHelper.js","sy-timeHelper.js","chatController.js","forgotController.js","submitController.js"],"names":["angular","module","config","$routeProvider","$locationProvider","$httpProvider","jwtInterceptorProvider","html5Mode","when","templateUrl","controller","otherwise","redirectTo","tokenGetter","store","get","interceptors","push","$rootScope","$scope","$timeout","$location","$route","$window","jwtHelper","detectmob","ua","navigator","userAgent","match","isMobile","standalone","console","log","$on","event","current","pre","next","path","isTokenExpired","replace","msg","$broadcast","directive","restrict","link","scope","elem","attr","focus","syPosHelper","attrs","pos","getNowPos","bind","now_pos","isScrollDown","isBottom","$apply","viewedMsg","template","atMsg","id","isAtMsgShow","document","getElementById","classList","add","remove","scrollToSpecPos","isViewMsg","contentItem","getElemTopPos","chatBoxHeight","scrollToPos","msgNotifyBox","type","isChatBox","isZoomIn","toggleCurrentPage","newMsgNotify","inputElem","find","blur","toggleClass","isImageLoaded","loadScript","e","t","a","n","r","createElement","src","onload","onreadystatechange","this","readyState","getElementsByTagName","parentNode","insertBefore","replaceWith","Vivus","duration","animTimingFunction","EASE_OUT_BOUNCE","isImgBoxRight","img_list","now_img_list","now_zoom_id","imgURL","toggleImgBox","obj","isMe","date","equals","toggleImageSize","url","openLink","open","$watch","newVal","removeClass","errMsg","addClass","okMsg","error","value","userCount","onlineUser","onUserIO","count","service","distanceHelper","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","weather_condition_codes","200","icon","201","202","210","211","212","221","230","231","232","300","301","302","310","311","313","314","321","500","501","502","503","504","511","520","521","522","531","600","601","602","611","612","615","616","620","621","622","701","711","721","731","741","751","761","771","781","800","801","802","803","804","900","901","902","903","904","905","906","951","952","953","954","955","956","957","958","959","960","961","962","getCityWeatherType","code","getGeoWeatherType","isNight","getDistance","origin","destination","distance","lat","lon","sinaImgHelper","img_url","size","now","Date","isShowDate","msgSanitization","number","list_len","length","i","imgSanitization","cache","indexOf","small","medium","large","nowPos","clientHeight","storeNowPos","scrollTop","offsetTop","getElemBottomPos","setNowPos","getBottomPos","chatBoxElem","scrollHeight","target_pos","element","scrollTo","then","partsOfADay","hour","getNumero","numero","getDaytimeOrNight","isSameDay","last","getTodayMs","UTC","getUTCFullYear","getUTCMonth","getUTCDate","$http","$filter","syTimeHelper","syGeoHelper","syMsgHelper","getSelectedDateNews","callback","post","selectDate","timezoneOffset","success","data","status","headers","onTextMsg","socket","msgInbox","isImg","username","at","decodeToken","msgPosInfo","topPos","bottomPos","connectSIO","io","query","token","on","emit","data_len","reconnectSIO","disconnect","connect","isSun","getHours","isInfoBox","toggleChatBox","action","currentPage","name","infoBox","title","weather","description","partWeather","togglePartWeather","isNewsExist","toggleNewsExist","newsBox","selectDateNewsBox","getTimezoneOffset","news","previousHour","nextHour","gotoSettingBox","isMuted","toggleMuted","set","quit","isGeoServices","toggleGeoServices","$emit","geoBox","weatherBox","getGeoServices","geolocation","getCurrentPosition","coords","latitude","longitude","last_code","last_geo","last_isNight","now_code","now_geo","now_isNight","last_weather","now_weather","atUser","isUserOnline","slice","oldVal","at_list","at_list_len","at_user_len","splice","msgOutbox","textMsg","emitTextMsg","isMsgNotify","msgNotify","input_shake_animate","forgot","step","returnToPreviousStep","gotoStepThree","forgotEmailSubmit","email","forgotCodeSubmit","password","isLogin","toggleSubmit","login","register","loginSubmit","user","registerSubmit","lowercase"],"mappings":"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","file":"sy.min.js","sourcesContent":["angular.module('ShinyaApp', [\n    'ngRoute',\n    'ngTouch',\n    'ngAnimate',\n    'angular-jwt',\n    'angular-storage',\n    'ShinyaApp.posHelperServices',\n    'ShinyaApp.timeHelperServices',\n    'ShinyaApp.geoHelperServices',\n    'ShinyaApp.msgHelperServices',\n    'ShinyaApp.notifyDirective',\n    'ShinyaApp.autofocusDirective',\n    'ShinyaApp.hideKeyboardDirective',\n    'ShinyaApp.imageonloadDirective',\n    'ShinyaApp.autoscrollDirective',\n    'ShinyaApp.imgDirective',\n    'ShinyaApp.beepDirective',\n    'ShinyaApp.usercountDirective',\n    'ShinyaApp.submitController',\n    'ShinyaApp.chatController',\n    'ShinyaApp.forgotController',\n    'duScroll'\n    ])\n.config(['$routeProvider', '$locationProvider', '$httpProvider', 'jwtInterceptorProvider', \n    function ($routeProvider, $locationProvider, $httpProvider, jwtInterceptorProvider) {\n    // $locationProvider.html5Mode(false).hashPrefix('!')\n    $locationProvider.html5Mode(true)\n    $routeProvider.\n        when('/', {\n            templateUrl: '/public/js/templates/submit.html',\n            controller: 'submitController'\n        }).\n        when('/chat', {\n            templateUrl: '/public/js/templates/chat.html',\n            controller: 'chatController'\n        }).\n        when('/forgot', {\n            templateUrl: '/public/js/templates/forgot.html',\n            controller: 'forgotController'\n        }).\n        otherwise({\n            redirectTo: '/'\n        })\n    jwtInterceptorProvider.tokenGetter = ['store', function(store) {\n        return store.get('id_token')\n    }]\n    $httpProvider.interceptors.push('jwtInterceptor')\n}])\n.controller('rootController', ['$rootScope', '$scope', '$timeout', '$location', '$route', '$window', 'jwtHelper', 'store', \n    function($rootScope, $scope, $timeout, $location, $route, $window, jwtHelper, store){\n\n    // 檢測是否為手機瀏覽器\n    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n    function detectmob() { \n        var ua = $window.navigator.userAgent;\n        if(\n            ua.match(/Android/i)\n            || ua.match(/webOS/i)\n            || ua.match(/iPhone/i)\n            || ua.match(/iPad/i)\n            || ua.match(/iPod/i)\n            || ua.match(/BlackBerry/i)\n            || ua.match(/Windows Phone/i)\n        ){\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    $rootScope.isMobile = detectmob()\n\n    // 檢測是否為全屏模式\n    if (!$window.navigator.standalone && $rootScope.isMobile){\n        console.log('no fullscreen mode')\n    }\n\n    /* 檢查 token\n     *  - 不存在\n     *  - 存在，腐爛：觸發提醒（submitController 處理）\n     *  - 存在，新鮮：跳轉到 '/chat'\n     */\n    // 必須 $routeChangeStart 攔截，否則若 token 過期，socket.io 握手不成功\n    $scope.$on('$routeChangeStart', function (event, current, pre, next){\n        if ($location.path() === '/'){\n            if (store.get('id_token')){\n                if (!jwtHelper.isTokenExpired(store.get('id_token'))){\n                    $location.path('/chat').replace()\n                }\n            }\n        } else if ($location.path() === '/chat'){\n            if(!store.get('id_token')){\n                $location.path('/').replace()\n            } else {\n                if (jwtHelper.isTokenExpired(store.get('id_token'))){\n                    $location.path('/').replace()\n                }\n            }\n        }\n    })\n    // 監聽開啟／關閉「位置服務」\n    $scope.$on('preTurnOnGeoServices', function (msg){\n        $timeout(function (){\n            $scope.$broadcast('turnOnGeoServices', msg)\n        }, 100)\n    })\n    $scope.$on('preTurnOffGeoServices', function (msg){\n        $timeout(function (){\n            $scope.$broadcast('turnOffGeoServices', msg)\n        }, 100)\n    })\n}])","angular.module('ShinyaApp.autofocusDirective', [])\n.directive('syAutofocus', ['$rootScope', '$timeout', function ($rootScope, $timeout){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            if (!$rootScope.isMobile){\n                $timeout(function (){\n                    elem[0].focus()\n                })\n            }\n        }\n    }\n}])","angular.module('ShinyaApp.autoscrollDirective' ,[])\n.directive('syAutoscroll', ['syPosHelper', function (syPosHelper){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attrs){\n            var pos = syPosHelper.getNowPos()\n            elem.bind('scroll', function (){\n                var now_pos = syPosHelper.getNowPos()\n                if (now_pos >= pos && syPosHelper.getNowPos() > 0){\n                    // Scroll Down\n                    scope.isScrollDown = true\n                } else {\n                    // Scroll Up\n                    scope.isScrollDown = false\n                }\n                pos = now_pos\n                if (syPosHelper.isBottom(scope.isScrollDown)){\n                    scope.$apply(function (){\n                        scope.viewedMsg(2)\n                    })\n                }\n            })\n        }\n    }\n}])","angular.module('ShinyaApp.beepDirective', [])\n.directive('syBeep', ['$timeout', 'syPosHelper', function ($timeout, syPosHelper){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div class=\"all_notify_box general_animate\" ng-if=\"!isViewMsg\" id=\"notify_box\">'\n                +   '<span ng-click=\"viewedMsg(1)\">{{msgNotifyBox.msg}}</span>'\n                +   '<audio ng-if=\"!isMuted\" autoplay>'\n                +       '<source src=\"public/sound/beep.ogg\" type=\"audio/ogg\">'\n                +       '<source src=\"public/sound/beep.m4a\" type=\"audio/x-m4a\">'\n                +   '</audio>'\n                +   '<audio ng-if=\"isMuted\" autoplay muted>'\n                +       '<source src=\"public/sound/beep.ogg\" type=\"audio/ogg\">'\n                +       '<source src=\"public/sound/beep.m4a\" type=\"audio/x-m4a\">'\n                +   '</audio>'\n                + '</div>',\n        controller: ['$scope', function ($scope){\n            /*\n             * 新消息抵達提醒\n             *      `$scope.isViewMsg`：新消息是否已閱\n             *      `$scope.msgNotifyBox`：提醒消息的內容\n             *      `$scope.isAtMsg`：判斷是否為提到（@）你的信息\n             *      `$scope.contentItem`：存儲提到（@）你的消息 id\n             */\n            $scope.isViewMsg = true\n            $scope.msgNotifyBox = {}\n            $scope.contentItem = 0\n            /* 滾動到消息位置後改變消息樣式 */\n            $scope.isAtMsgShow = false\n            function atMsg(id){\n                $scope.isAtMsgShow = true\n                var elem = document.getElementById(id)\n                elem.classList.add('atMsg')\n                $timeout(function (){\n                    elem.classList.remove('atMsg')\n                    $timeout(function (){\n                        $scope.isAtMsgShow = false\n                    }, 717)\n                }, 717)\n            }\n            function scrollToSpecPos(){\n                $scope.isViewMsg = true\n                if ($scope.contentItem){\n                    // 有用戶提到（@）你，滾動到相應位置\n                    var pos = syPosHelper.getElemTopPos($scope.contentItem) - syPosHelper.chatBoxHeight / 2\n                    syPosHelper.scrollToPos(pos || null, $scope.isScrollDown)\n                    atMsg($scope.contentItem)\n                    $scope.contentItem = 0\n                } else {\n                    // 新消息，滾動到底部\n                    syPosHelper.scrollToPos(null, $scope.isScrollDown)\n                }   \n            }\n            $scope.viewedMsg = function (type){\n                // 當前不處於 chat_box，切換到 chat_box 後滾動\n                if (!$scope.isChatBox){\n                    if (!$scope.isChatBox){\n                        // 從 `geo_box` / `news_box` 返回 `chat_box` 時，重置 `user_info_box`\n                        $scope.toggleCurrentPage('infoBox')\n                    }\n                    $scope.isChatBox = !$scope.isChatBox\n                    $timeout(function (){\n                        scrollToSpecPos()\n                    })\n                } else {\n                    if (type === 1){\n                        $scope.isZoomIn = false\n                        // 滾動並抹除提醒\n                        scrollToSpecPos()\n                    } else if (type === 2){\n                        // 不滾動，只抹除提醒\n                        $scope.isViewMsg = true\n                    }\n                }\n\n            }\n            $scope.newMsgNotify = function(type, msg, pos){\n                $scope.$apply(function (){\n                    if (type === 'newMsg'){\n                        $scope.msgNotifyBox = {\n                            'type': 'newMsg',\n                            'msg' : msg\n                        }\n                        $scope.isViewMsg = false\n                    } else if (type === 'atMsg'){\n                        $scope.msgNotifyBox = {\n                            'type': 'atMsg',\n                            'msg' : '@' + msg + ' 提到了你'\n                        }\n                        $scope.contentItem = pos\n                        $scope.isViewMsg = false\n                    }\n                })\n            }\n        }]\n    }\n}])","angular.module('ShinyaApp.hideKeyboardDirective', [])\n.directive('syHideKeyboard', ['$rootScope', function ($rootScope){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            var inputElem = elem.find('input');\n            if ($rootScope.isMobile){\n                elem.bind('submit', function (){\n                    inputElem[0].blur()\n                })\n            }\n        }\n    }\n}])","// via http://stackoverflow.com/a/17884754/3786947\nangular.module('ShinyaApp.imageonloadDirective', [])\n.directive('syImageonload', ['$rootScope', '$timeout', function ($rootScope, $timeout){\n    return {\n        restrict: 'A',\n        link: function(scope, elem, attr) {\n            elem.toggleClass('loding')\n            elem.bind('load', function() {\n                elem.toggleClass('loding')\n                scope.$apply(function (){\n                    scope.isImageLoaded = true\n                })\n            })\n            elem.bind('error', function (){\n                if (elem.attr('ng-class') === '{\\'zoom_out\\': isZoomIn && $index === now_zoom_id}'){\n                    // #img_box\n                    elem.attr('src', 'data:image/jpg;base64,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')\n                } else {\n                    // #img_fullscreen_box\n                    // via http://stackoverflow.com/a/7719185/3786947\n                    function loadScript(e,t){var a,n,r;n=!1,a=document.createElement(\"script\"),a.type=\"text/javascript\",a.src=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&\"complete\"!=this.readyState||(n=!0,t())},r=document.getElementsByTagName(\"script\")[0],r.parentNode.insertBefore(a,r)}\n                    loadScript('/public/dist/vivus.min.js', function (){\n                        elem.next().remove()\n                        elem.replaceWith('<svg id=\"vivus_img_load_err\" width=\"200\" height=\"200\" viewBox=\"0 0 530 531\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\"><path d=\"M51.249 150.754c-3.454-1.73-5.458-.099-4.478 3.638l.706 2.688c8.007 30.503-2.998 73.868-24.584 96.861l-.662.706c-2.644 2.816-1.65 5.288 2.192 5.521l136.651 8.259c9.377.567 23.956-2.028 32.559-5.794l21.283-9.316-13.767-18.806c-5.549-7.58-16.85-17.132-25.253-21.34l-124.647-62.418z\" fill=\"#000\"/><path d=\"M9.298 290.938c13.001 129.203 122.073 230.062 254.702 230.062 141.385 0 256-114.615 256-256s-114.615-256-256-256c-84.794 0-159.96 41.226-206.547 104.728\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M361.259 190.733c-4.06-1.129-8.339-1.733-12.759-1.733-26.234 0-47.5 21.266-47.5 47.5 0 4.115.523 8.109 1.507 11.917\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\"/><path d=\"M213.468 406.97c13.141-16.776 37.347-28.026 65.032-28.026 30.37 0 56.552 13.538 68.536 33.056\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></g></svg>')\n                        new Vivus('vivus_img_load_err', {type: 'delayed', duration: 77, animTimingFunction: Vivus.EASE_OUT_BOUNCE})\n                        scope.$apply(function (){\n                            scope.isImageLoaded = true\n                        })\n                    })\n                }\n            })\n        }\n    }\n}])","angular.module('ShinyaApp.imgDirective', [])\n.directive('syImg', function (){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div ng-if=\"now_img_list.length > 0\" id=\"img_box\" ng-class=\"{\\'me\\': isImgBoxRight, \\'mobile\\': isMobile}\">'\n                +   '<ul>'\n                +       '<li ng-repeat=\"url in now_img_list\" class=\"general_animate\">'\n                +           '<img ng-src=\"{{url.small}}\" ng-class=\"{\\'zoom_out\\': isZoomIn && $index === now_zoom_id}\" ng-click=\"toggleImageSize(url, $index)\" sy-imageonload>'\n                +       '</li>'\n                +   '</ul>'\n                + '</div>',\n        controller: ['$scope', '$window', '$timeout', function ($scope, $window, $timeout){\n            /*\n             **************\n             * 圖片消息相關\n             **************\n             * \n             *  `$scope.isZoomIn`：圖片是否放大\n             *  `$scope.isImgBoxRight`：`img_box` 是否右浮\n             *  `$scope.isImageLoaded`：大圖是否已經加載完畢\n             *  `$scope.img_list`：存儲消息中所有的圖片消息\n             *  `$scope.now_img_list`：現在閱覽中的消息中中的圖片\n             *  `$scope.now_zoom_id`：現在閱覽中的圖片的 $index\n             *  `$scope.imgURL`：現在閱覽中的大圖的 URL\n             *  `$scope.toggleImgBox`：處理顯示／隱藏 `img_box`\n             *  `$scope.toggleImageSize`：處理打開／關閉大圖\n             *\n             */\n            $scope.isZoomIn = false\n            $scope.isImgBoxRight = false\n            $scope.isImageLoaded = false\n            $scope.img_list = {}\n            $scope.now_img_list = []\n            $scope.now_zoom_id = -1\n            $scope.imgURL = ''\n            $scope.toggleImgBox = function (obj){\n                var isMe = obj.isMe,\n                    id   = obj.date;\n                if ($scope.now_img_list !== $scope.img_list[id] && angular.equals($scope.now_img_list, [])){\n                    // 現在不存在已打開的圖片預覽，直接打開\n                    $scope.isImgBoxRight = isMe\n                    $scope.now_img_list = $scope.img_list[id]\n                } else if ($scope.now_img_list !== $scope.img_list[id] && !angular.equals($scope.now_img_list, [])){\n                    // 現在存在已打開的圖片預覽，先關閉，再打開\n                    $scope.now_img_list = []\n                    $timeout(function (){\n                        $scope.isImgBoxRight = isMe\n                        $scope.now_img_list = $scope.img_list[id]\n                    }, 717)\n                } else {\n                    // 關閉圖片預覽\n                    $scope.now_img_list = []\n                }\n            }\n            $scope.toggleImageSize = function (url, id){\n                if (url && id !== $scope.now_zoom_id){\n                    // 切換大圖時，先 DOM 移除元素，再重新 DOM 插入元素\n                    // 使 `syImageonload` Directive 重載\n                    $scope.isZoomIn = false\n                    $timeout(function (){\n                        $scope.isZoomIn = true\n                    })\n                    $scope.imgURL = url\n                    $scope.now_zoom_id = id\n                    $scope.isImageLoaded = false\n                } else {\n                    $scope.isZoomIn = false\n                    $scope.now_zoom_id = -1\n                }\n            }\n            $scope.openLink = function (link){\n                $window.open(link)\n            }\n        }]\n    }\n})","angular.module('ShinyaApp.notifyDirective', [])\n.directive('syNotify', function (){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            scope.$watch('isMsgNotify', function (newVal){\n                elem.removeClass('submit_animate')\n                elem.attr('type', 'button')\n                if (newVal){\n                    // elem.removeAttr('type')\n                    if (scope.errMsg){\n                        elem.addClass('error_msg')\n                        elem.attr('value', scope.errMsg)\n                    } else if (scope.okMsg){\n                        elem.addClass('ok_msg')\n                        elem.attr('value', scope.okMsg)\n                    } else {\n                        console.error('[TypeError]: Not `error` or `ok`')\n                    }\n                } else {\n                    elem.removeClass('error_msg ok_msg').addClass('submit_animate')\n                    elem.attr({\n                        'type' : 'submit',\n                        'value': '提交'\n                    })\n                }\n            })\n        }\n    }\n})","angular.module('ShinyaApp.usercountDirective', [])\n.directive('syUsercount', function (){\n    return {\n        restrict: 'E',\n        template: '<div ng-if=\"!isMobile\" id=\"userCount\">'\n                +   '在線人數：{{userCount}}'\n                + '</div>',\n        controller: ['$scope', function ($scope){\n            \n            // 在線人數\n            $scope.userCount  = 0\n            $scope.onlineUser = []\n            $scope.onUserIO = function(msg){\n                $scope.$apply(function (){\n                    $scope.userCount  = msg.count\n                    $scope.onlineUser = msg.onlineUser\n                })\n            }\n        }]\n    }\n})","angular.module('ShinyaApp.geoHelperServices', [])\n.service('syGeoHelper', function(){\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n//:::                                                                         :::\n//:::  This routine calculates the distance between two points (given the     :::\n//:::  latitude/longitude of those points). It is being used to calculate     :::\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\n//:::                                                                         :::\n//:::  Definitions:                                                           :::\n//:::    South latitudes are negative, east longitudes are positive           :::\n//:::                                                                         :::\n//:::  Passed to function:                                                    :::\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\n//:::    unit = the unit you desire for results                               :::\n//:::           where: 'M' is statute miles (default)                         :::\n//:::                  'K' is kilometers                                      :::\n//:::                  'N' is nautical miles                                  :::\n//:::                                                                         :::\n//:::  Worldwide cities and other features databases with latitude longitude  :::\n//:::  are available at http://www.geodatasource.com                          :::\n//:::                                                                         :::\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\n//:::                                                                         :::\n//:::  Official Web site: http://www.geodatasource.com                        :::\n//:::                                                                         :::\n//:::               GeoDataSource.com (C) All Rights Reserved 2015            :::\n//:::                                                                         :::\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n\n    function distanceHelper(lat1, lon1, lat2, lon2, unit) {\n        var radlat1 = Math.PI * lat1/180\n        var radlat2 = Math.PI * lat2/180\n        var radlon1 = Math.PI * lon1/180\n        var radlon2 = Math.PI * lon2/180\n        var theta = lon1-lon2\n        var radtheta = Math.PI * theta/180\n        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n        dist = Math.acos(dist)\n        dist = dist * 180/Math.PI\n        dist = dist * 60 * 1.1515\n        if (unit==\"K\") { dist = dist * 1.609344 }\n        if (unit==\"N\") { dist = dist * 0.8684 }\n        return dist\n    }\n    var weather_condition_codes = {\n        // http://openweathermap.org/weather-conditions\n        // Thunderstorm 200 ~ 232\n        '200': {'type': 'lightning', 'icon': 'lightning'},\n        '201': {'type': 'lightning', 'icon': 'lightning'},\n        '202': {'type': 'lightning', 'icon': 'lightning'},\n        '210': {'type': 'lightning', 'icon': 'lightning'},\n        '211': {'type': 'lightning', 'icon': 'lightning'},\n        '212': {'type': 'lightning', 'icon': 'lightning'},\n        '221': {'type': 'lightning', 'icon': 'lightning'},\n        '230': {'type': 'lightning', 'icon': 'lightning'},\n        '231': {'type': 'lightning', 'icon': 'lightning'},\n        '232': {'type': 'lightning', 'icon': 'lightning'},\n        // Drizzle 300 ~ 321\n        '300': {'type': 'rain', 'icon': 'drizzle'},\n        '301': {'type': 'rain', 'icon': 'drizzle'},\n        '302': {'type': 'rain', 'icon': 'drizzle'},\n        '310': {'type': 'rain', 'icon': 'drizzle'},\n        '311': {'type': 'rain', 'icon': 'drizzle'},\n        '313': {'type': 'rain', 'icon': 'showers'},\n        '314': {'type': 'rain', 'icon': 'showers'},\n        '321': {'type': 'rain', 'icon': 'showers'},\n        // Rain 500 ~ 531\n        '500': {'type': 'rain', 'icon': 'rain'},\n        '501': {'type': 'rain', 'icon': 'rain'},\n        '502': {'type': 'rain', 'icon': 'downpour'},\n        '503': {'type': 'rain', 'icon': 'downpour'},\n        '504': {'type': 'rain', 'icon': 'downpour'},\n        '511': {'type': 'rain', 'icon': 'flurries'},\n        '520': {'type': 'rain', 'icon': 'showers'},\n        '521': {'type': 'rain', 'icon': 'showers'},\n        '522': {'type': 'rain', 'icon': 'showers'},\n        '531': {'type': 'rain', 'icon': 'showers'},\n        // Snow 600 ~ 622\n        '600': {'type': 'snow', 'icon': 'snow'},\n        '601': {'type': 'snow', 'icon': 'snow'},\n        '602': {'type': 'snow', 'icon': 'snow'},\n        '611': {'type': 'snow', 'icon': 'sleet'},\n        '612': {'type': 'snow', 'icon': 'sleet'},\n        '615': {'type': 'snow', 'icon': 'sleet'},\n        '616': {'type': 'snow', 'icon': 'sleet'},\n        '620': {'type': 'snow', 'icon': 'sleet'},\n        '621': {'type': 'snow', 'icon': 'sleet'},\n        '622': {'type': 'snow', 'icon': 'sleet'},\n        // Atmosphere 701 ~ 781\n        '701': {'type': 'fog', 'icon': 'fog'},\n        '711': {'type': 'fog', 'icon': 'haze'},\n        '721': {'type': 'fog', 'icon': 'haze'},\n        '731': {'type': 'fog', 'icon': 'haze'},\n        '741': {'type': 'fog', 'icon': 'fog'},\n        '751': {'type': 'fog', 'icon': 'fog'},\n        '761': {'type': 'fog', 'icon': 'fog'},\n        '771': {'type': 'fog', 'icon': 'tornado'},\n        '781': {'type': 'fog', 'icon': 'tornado'},\n        // Sun & Clouds 800, 904\n        '800': {'type': 'sun', 'icon': 'sun'},\n        '801': {'type': 'sun', 'icon': 'sun'},\n        '802': {'type': 'clouds', 'icon': 'cloud'},\n        '803': {'type': 'clouds', 'icon': 'cloud'},\n        '804': {'type': 'clouds', 'icon': 'cloud'},\n        // Extreme\n        '900': {'type': 'wind', 'icon': 'tornado'},\n        '901': {'type': 'wind', 'icon': 'tornado'},\n        '902': {'type': 'wind', 'icon': 'tornado'},\n        '903': {'type': 'wind', 'icon': 'thermometer low'},\n        '904': {'type': 'wind', 'icon': 'thermometer full'},\n        '905': {'type': 'wind', 'icon': 'wind'},\n        '906': {'type': 'wind', 'icon': 'hail'},\n        // Additional\n        '951': {'type': 'wind', 'icon': 'wind'},\n        '952': {'type': 'wind', 'icon': 'wind'},\n        '953': {'type': 'wind', 'icon': 'wind'},\n        '954': {'type': 'wind', 'icon': 'wind'},\n        '955': {'type': 'wind', 'icon': 'wind'},\n        '956': {'type': 'wind', 'icon': 'tornado'},\n        '957': {'type': 'wind', 'icon': 'tornado'},\n        '958': {'type': 'wind', 'icon': 'tornado'},\n        '959': {'type': 'wind', 'icon': 'tornado'},\n        '960': {'type': 'wind', 'icon': 'tornado'},\n        '961': {'type': 'wind', 'icon': 'tornado'},\n        '962': {'type': 'wind', 'icon': 'tornado'}\n    }\n    this.getCityWeatherType = function (code){\n\n        if (code in weather_condition_codes){\n            return weather_condition_codes[code]['type']\n        } else {\n            return 'others'\n        }\n    },\n    this.getGeoWeatherType = function (code, isNight){\n\n        if (code in weather_condition_codes){\n            if (isNight){\n                return weather_condition_codes[code]['icon'] + ' moon'\n            } else {\n                return weather_condition_codes[code]['icon'] + ' sun'\n            }\n        } else {\n            return 'cloud refresh'\n        }\n    },\n    this.getDistance = function (origin, destination){\n\n        var distance = ~~distanceHelper(origin.lat, origin.lon, destination.lat, destination.lon, 'K')\n        return !!distance ? distance + ' km' : '0 km'\n    }\n})","angular.module('ShinyaApp.msgHelperServices', [])\n.service('syMsgHelper', function(){\n\n    function sinaImgHelper (img_url, size){\n        return img_url.replace(/square|thumbnail|thumb150|bmiddle|mw600|large/, size)\n    }\n    var now = Date.now()\n    // 間隔 60 秒顯示時間\n    this.isShowDate = function (date){\n        if (date - now > 1000 * 60){\n            now = Date.now()\n            return true\n        } else {\n            return false\n        }\n    },\n    // 將文本消息中包含的圖片超鏈接替換\n    this.msgSanitization = function (msg, img_list){\n        var number   = [\n        // 因限制了 1024 個字符，故圖片數目一般不超過以下列表的數字\n                '一', '二', '三', '四', '五', '六', '七', '八', '九', '十', \n                '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '廿', \n                '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '卅', \n                '卅一', '卅二', '卅三', '卅四', '卅五', '卅六', '卅七', '卅八', '卅九' \n            ],\n            list_len = img_list.length;\n        for (var i = 0; i < list_len; i++){\n            msg = msg.replace(img_list[i], '[圖' + (number[i] ? number[i] : ' ' + (i + 1)) + ']')\n        }\n        return msg\n    },\n    // 將圖片超鏈接提取出「縮略圖」、「中圖」、「大圖」，目前僅支持新浪圖庫\n    this.imgSanitization = function (img_list){\n        var cache    = [],\n            list_len = img_list.length;\n        for (var i = 0; i < list_len; i++){\n            if (img_list.indexOf('sinaimg.cn' > 0)){\n                // 新浪圖床\n                cache.push({\n                    'small' : sinaImgHelper(img_list[i], 'square'),\n                    'medium': sinaImgHelper(img_list[i], 'bmiddle'),\n                    'large' : sinaImgHelper(img_list[i], 'large')\n                })\n            } else {\n                cache.push({\n                    'small' : img_list[i],\n                    'medium': img_list[i],\n                    'large' : img_list[i]\n                })\n            }\n        }\n        return cache\n    }\n})","angular.module('ShinyaApp.posHelperServices', [])\n.service('syPosHelper', ['$rootScope', function($rootScope){\n    \n    /*\n     * `this.nowPos`: 當前 `#chat_box` 位置\n     * `this.getBottomPos`: 獲取 `#chat_box` 底部位置\n     * `this.storeNowPos`: 保存 `#chat_box` 當前位置\n     * `this.setNowPos`: 設置 `#chat_box` 當前位置\n     * `this.getBottomPos`: 獲取 `#chat_box` 底部位置\n     * `this.isBottom`: 判斷是否在 `#chat_box` 底部\n     * `this.scrollToBottom`: 滾動到 `#chat_box` 底部\n     *\n     * `isScrolling` 是否正在滾動\n     *      是：若新消息抵達，滾動到底部\n     *      否：根據是否在底部和是否本人發送新消息，判斷是否需要滾動到底部\n     */\n    this.nowPos = 0\n    this.chatBoxHeight = document.getElementById('chat_box').clientHeight\n    this.storeNowPos = function (){\n        this.nowPos = document.getElementById('chat_box').scrollTop\n    }\n    this.getNowPos = function (){\n        return document.getElementById('chat_box').scrollTop\n    }\n    this.getElemTopPos = function (id){\n        return document.getElementById(id).offsetTop\n    }\n    this.getElemBottomPos = function (id){\n        return document.getElementById(id).offsetTop + document.getElementById(id).clientHeight\n    }\n    this.setNowPos = function (nowPos){\n        document.getElementById('chat_box').scrollTop = nowPos\n    }\n    this.getBottomPos = function (){\n        var chatBoxElem = document.getElementById('chat_box')\n        return chatBoxElem.scrollHeight - chatBoxElem.clientHeight\n    }\n    this.isBottom = function (){\n        var chatBoxElem = document.getElementById('chat_box')\n        return (chatBoxElem.scrollHeight - chatBoxElem.clientHeight - chatBoxElem.scrollTop <= 0)\n    }\n    this.scrollToPos = function (pos, isScrollDown){\n\n        // 默認滾動到底部\n        var target_pos = pos || this.getBottomPos()\n        if (!$rootScope.isMobile){\n            angular.element(document.getElementById('chat_box'))\n            .scrollTo(0, target_pos, 171)\n            .then(function(){\n                isScrollDown = false\n            })\n        } else {\n            this.setNowPos(target_pos)\n        }\n    }\n}])","angular.module('ShinyaApp.timeHelperServices', [])\n.service('syTimeHelper', function(){\n\n    // 用戶註冊當日時刻\n    this.partsOfADay = function (hour) {\n\n        if (hour <= 3){\n            return '深夜'\n        } else if (hour <= 6){\n            return '破曉'\n        } else if (hour <= 9){\n            return '早晨'\n        } else if (hour <= 12){\n            return '午前'\n        } else if (hour <= 15){\n            return '午後'\n        } else if (hour <= 18){\n            return '傍晚'\n        } else if (hour <= 21){\n            return '薄暮'\n        } else {\n            return '深夜'\n        }\n    },\n    // 用戶註冊次序號\n    this.getNumero = function (numero){\n\n        if (numero < 77){\n            return 'gold'\n        } else if(numero < 177){\n            return 'aluminum'\n        } else {\n            return 'steel'\n        }\n    },\n    // 判斷「白天」／「夜晚」\n    this.getDaytimeOrNight = function (hour){\n\n        return 6 < hour && hour < 18\n        ? 'daytime'\n        : 'night'\n    },\n    this.isSameDay = function (now, last){\n        \n        var now  = new Date(now),\n            last = new Date(last);\n            getTodayMs = function (date){\n                return Date.UTC(\n                        date.getUTCFullYear(),\n                        date.getUTCMonth(),\n                        date.getUTCDate()\n                    )\n            }\n        return getTodayMs(now) === getTodayMs(last)\n    }\n})","angular.module('ShinyaApp.chatController', [])\n.controller('chatController', ['$rootScope', '$scope', '$http', '$timeout', '$window', '$location', '$filter', 'jwtHelper','store', 'syPosHelper', 'syTimeHelper', 'syGeoHelper', 'syMsgHelper', \n    function ($rootScope, $scope, $http, $timeout, $window, $location, $filter, jwtHelper, store, syPosHelper, syTimeHelper, syGeoHelper, syMsgHelper){\n\n    /*\n     **********\n     * 頁面切換\n     **********\n     *  `$scope.isChatBox`：是否處於 `chat_box` 頁面\n     *  `$scope.isSun`：提示標誌(白天／夜晚)\n     *  `$scope.toggleChatBox`：切換頁面\n     *      移動端：根據滑動切換\n     *          右滑：若處於 `chat_box`，切換到 `info_box`\n     *               若處於 `geo_box` / `news_box / `load_box`，切換到 `info_box`\n     *\n     *          左滑：若處於 `info_box`，切換到 `chat_box`\n     *\n     *      桌面段：根據點擊 `.sunAndMoon` 切換\n     *\n     */\n    $scope.isChatBox = true\n    if (syTimeHelper.getDaytimeOrNight(new Date().getHours()) === 'daytime'){\n        $scope.isSun = true        \n    } else {\n        $scope.isSun = false\n    }\n    $scope.isInfoBox = false\n    $scope.toggleChatBox = function (action){\n\n        if (!!action){\n            // 移動端\n            if (action === 'left'){\n                if ($scope.isChatBox){\n                    $scope.isChatBox = !$scope.isChatBox\n                }\n            } else if (action === 'right'){\n                if (!$scope.isChatBox && $scope.currentPage === 'infoBox'){\n                    $scope.isChatBox = !$scope.isChatBox\n                } else {\n                    $scope.toggleCurrentPage('infoBox')\n                }\n            }\n        } else {\n            // 桌面端\n            if (!$scope.isChatBox){\n                // 從 `geo_box` / `news_box` 返回 `chat_box` 時，重置 `user_info_box`\n                $scope.toggleCurrentPage('infoBox')\n            }\n            $scope.isChatBox = !$scope.isChatBox\n            $scope.isSun     = !$scope.isSun\n        }\n        $scope.now_img_list = []\n        $scope.isZoomIn = false\n    }\n    $scope.currentPage = 'infoBox'\n    $scope.toggleCurrentPage = function (name){\n        $timeout(function (){\n            $scope.currentPage = name\n        })\n    }\n    /*\n     **************\n     * 用戶基本信息\n     **************\n     *      `$scope.infoBox`\n     *          title: 加入於／當日天氣\n     *          username: 用戶名\n     *          numero: 註冊序號\n     *          date: 註冊日期\n     *          partsOfADay: 註冊當日時分\n     *          weather: 當日天氣\n     *\n     */\n    var token = store.get('id_token'),\n        decodeToken = jwtHelper.decodeToken(token);\n    console.log(decodeToken)\n    // 從 JWT 解碼獲取用戶信息\n    $scope.infoBox = {\n        title      : '加入於',\n        username   : decodeToken.username,\n        numero     : decodeToken.numero,\n        date       : $filter('date')(decodeToken.date, 'yyyy 年 M 月 d 日'),\n        partsOfADay: syTimeHelper.partsOfADay(~~($filter('date')(decodeToken.date, 'H'))),\n        weather    : decodeToken.weather.description\n    }\n    $scope.numero = syTimeHelper.getNumero($scope.infoBox.numero)\n    $scope.getDaytimeOrNight = syTimeHelper.getDaytimeOrNight(~~($filter('date')(decodeToken.date, 'H')))\n    $scope.partWeather = ''\n    $scope.togglePartWeather = function (){\n        if ($scope.partWeather == syGeoHelper.getCityWeatherType(decodeToken.weather.code)){\n            $scope.partWeather = ''\n            $timeout(function (){\n                $scope.infoBox.title = '加入於'\n            }, 777)\n        } else {\n            $scope.partWeather = syGeoHelper.getCityWeatherType(decodeToken.weather.code)\n            $timeout(function (){\n                $scope.infoBox.title = '當日天氣'\n            }, 777)\n        }\n    }\n    /*\n     *****************\n     * 用戶註冊當日新聞\n     *****************\n     *     `$scope.newsBox` 緩存獲取到的新聞\n     *     `$scope.selectDateNewsBox` 當前展示的新聞，從 `$scope.newsBox` 獲取\n     *     `$scope.selectDate` 本地時間\n     *     `$scope.previousHour` 獲取上一個時間段新聞\n     *          更新：`$scope.selectDate`、`$scope.selectDateNewsBox`\n     *     `$scope.nextHour` 獲取下一個時間段新聞\n     *          更新：`$scope.selectDate`、`$scope.selectDateNewsBox`\n     *     `getSelectedDateNews` 獲取新聞，\n     *         成功：保存到 `$scope.newsBox`，更新 `$scope.selectDateNewsBox`\n     *         失敗：\n     *             狀態碼 401：JWT 過期，跳轉到首頁\n     *             狀態碼 400：此時段新聞未獲取，`$scope.isNewsExist` -> false\n     */\n    $scope.isNewsExist = false\n    $scope.toggleNewsExist = function (){\n        $scope.isNewsExist = !$scope.isNewsExist\n    }\n    $scope.newsBox = {}\n    $scope.selectDateNewsBox = []\n    $scope.timezoneOffset = new Date().getTimezoneOffset() / 60\n    $scope.selectDate = new Date().getHours()\n    function getSelectedDateNews(callback){\n        $http.\n        post('/api/getSelectedDateNews', {\n            selectDate: $scope.selectDate,\n            timezoneOffset: $scope.timezoneOffset\n        }).\n        success(function (data, status, headers, config){\n            callback('ok', data.msg)\n        }).\n        error(function (data, status, headers, config){\n            if (status === 401){\n                $location.path('/').replace()\n            } else {\n                callback('error', data.msg)\n            }\n        })\n    }\n    $scope.getSelectedDateNews = function(){\n        if ($scope.selectDate in $scope.newsBox){\n            // 從 `$scope.newsBox` 獲取，不執行 `getSelectedDateNews`\n            $scope.selectDateNewsBox = $scope.newsBox[$scope.selectDate]\n            if ($scope.currentPage === 'infoBox'){\n                $scope.toggleCurrentPage('newsBox')\n            }\n            if (!$scope.isNewsExist){\n                $scope.toggleNewsExist()\n            }\n        } else {\n            // 過場動畫\n            $scope.toggleCurrentPage('loadBox')\n            getSelectedDateNews(function (status, news){\n                if (status === 'ok'){\n                    $scope.newsBox[$scope.selectDate] = news\n                    $scope.selectDateNewsBox = $scope.newsBox[$scope.selectDate]\n                    if ($scope.currentPage === 'loadBox'){\n                        $scope.toggleCurrentPage('newsBox')\n                    }\n                    if (!$scope.isNewsExist){\n                        $scope.toggleNewsExist()\n                    }\n                } else {\n                    if ($scope.currentPage === 'loadBox'){\n                        $scope.toggleCurrentPage('newsBox')\n                    }\n                    if ($scope.isNewsExist){\n                        $scope.toggleNewsExist()\n                    }\n                }\n            })\n        }\n    }\n    $scope.previousHour = function (){\n        if ($scope.selectDate > 1){\n            $scope.selectDate --\n            $scope.getSelectedDateNews()\n        } else {\n            $scope.selectDate = 24\n            $scope.getSelectedDateNews()\n        }\n    }\n    $scope.nextHour = function (){\n        if ($scope.selectDate < 24){\n            $scope.selectDate ++\n            $scope.getSelectedDateNews()\n        } else {\n            $scope.selectDate = 1\n            $scope.getSelectedDateNews()\n        }\n    }\n    /**********\n     * 設置界面\n     **********\n     *\n     *  `$scope.gotoSettingBox`：跳轉到「設置界面」\n     *  `$scope.quit`：註銷\n     *  `$scope.toggleGeoServices`：開關「位置服務」\n     *\n     */\n    $scope.gotoSettingBox = function (){\n        if ($scope.currentPage === 'infoBox'){\n            $scope.toggleCurrentPage('settingBox')\n        }\n     }\n    $scope.isMuted = !!store.get('isMuted')\n    $scope.toggleMuted = function (){\n        $scope.isMuted = !$scope.isMuted\n        store.set('isMuted', $scope.isMuted)\n    }\n    $scope.quit = function (){\n        store.remove('id_token')\n        store.remove('isGeoServices')\n        $rootScope.socket.disconnect()\n        $location.path('/')\n    }\n    $scope.isGeoServices = store.get('isGeoServices') || decodeToken.isGeoServices\n    $scope.toggleGeoServices = function (){\n        $http.\n        post('/api/toggleGeoServices', {\n            'isGeoServices': !$scope.isGeoServices\n        }).\n        success(function (data, status, headers, config){\n            if (data.msg === 'on'){\n                store.set('isGeoServices', true)\n                $scope.$emit('preTurnOnGeoServices', '驗證身份以開啟服務')\n            } else {\n                store.set('isGeoServices', false)\n                $scope.$emit('preTurnOffGeoServices', '驗證身份以關閉服務')\n            }\n            $scope.quit()\n        }).\n        error(function (data, status, headers, config){\n            if (status === 401){\n                $location.path('/')\n            }\n        })\n    }\n    /*\n     **************\n     * 地理位置相關\n     **************\n     * \n     * `$scope.geoBox`：地理位置信息\n     * `$scope.weatherBox`：天氣信息\n     * `$scope.isGeoServices`：是否已開啟「位置服務」\n     * `$scope.isSameDay`：判斷是否同一天\n     * `$scope.getGeoServices`：獲取位置信息\n     *\n     */\n    $scope.geoBox = {}\n    $scope.weatherBox = {}\n    $scope.isSameDay = false\n    $scope.getGeoServices = function (){\n        if (!$scope.isGeoServices){\n            // 未開啟「位置服務」\n            if ($scope.currentPage === 'infoBox'){\n                $scope.toggleCurrentPage('geoBox')\n            }\n        } else if ($scope.geoBox.distance) {\n            // 已開啟「位置服務」\n            // 已獲取「位置服務」所需信息，跳轉到 `geo_box`\n            if ($scope.currentPage === 'infoBox'){\n                $scope.toggleCurrentPage('geoBox')\n            }\n        } else {\n            // 未獲取「位置服務」所需信息，跳轉到「過場動畫」\n            if ($scope.currentPage === 'infoBox'){\n                $scope.toggleCurrentPage('loadBox')\n            }\n            $window.navigator.geolocation.getCurrentPosition(function (pos){\n                console.log(pos.coords.latitude, pos.coords.longitude)\n                $http.\n                post('/api/getGeoServices', {\n                    coords: {\n                        lat: pos.coords.latitude,\n                        lon: pos.coords.longitude\n                    }\n                }).\n                success(function (data, status, headers, config){\n\n                    var last_code    = data.msg.last_geo.weather.code,\n                        last_isNight = data.msg.last_geo.weather.isNight,\n                        now_code     = data.msg.now_geo.weather.code,\n                        now_isNight  = data.msg.now_geo.weather.isNight\n                        last_weather = syGeoHelper.getGeoWeatherType(last_code, last_isNight),\n                        now_weather  = syGeoHelper.getGeoWeatherType(now_code, now_isNight);\n\n                    $scope.geoBox = data.msg\n                    $scope.geoBox.distance = syGeoHelper.getDistance(data.msg.last_geo, data.msg.now_geo)\n                    $scope.weatherBox = {\n                        'last_weather': last_weather,\n                        'now_weather': now_weather\n                    }\n                    $scope.isSameDay = syTimeHelper.isSameDay($scope.geoBox.now_geo.date, $scope.geoBox.last_geo.date)\n                    if ($scope.currentPage === 'loadBox'){\n                        $scope.toggleCurrentPage('geoBox')\n                    }\n                }).\n                error(function (data, status, headers, config){\n                    if (status === 401){\n                        $location.path('/')\n                    }\n                })\n            })\n        }\n    }\n    /********\n     * @user\n     ********\n     *\n     *  `$scope.atUser`：當前 @ 的用戶列表\n     *  `$scope.isUserOnline`：判斷用戶是否在線\n     *\n     */\n    $scope.atUser = []\n    $scope.isUserOnline = function (username){\n        return $scope.onlineUser.indexOf(username.slice(1)) >= 0\n    }\n    $scope.$watch('msgOutbox.textMsg', function (newVal, oldVal){\n\n        var at_list = newVal.match(/\\@([^\\s\\@]){1,16}/g)\n        if (at_list && at_list !== $scope.atUser){\n            // 是否需要「新增」\n            var at_list_len = at_list.length\n            for (var i = 0; i < at_list_len; i ++){\n                if ($scope.atUser.indexOf(at_list[i]) < 0){\n                    $scope.atUser.push(at_list[i])\n                }\n            }\n            // 是否需要「刪減」\n            var at_user_len = $scope.atUser.length\n            for(var i = 0; i < at_user_len; i ++){\n                if (at_list.indexOf($scope.atUser[i]) < 0){\n                    $scope.atUser.splice(i, 1)\n                }\n            }\n        } else {\n            $scope.atUser = []\n        }\n    })\n    /*\n     *******************\n     * 文本消息抵達與發送\n     *******************\n     *  \n     *  `$scope.msgInbox`：存儲消息\n     *  `$scope.msgOutbox`：待發送消息\n     *  `onTextMsg`：文本消息抵達\n     *  `$scope.emitTextMsg`：文本消息發送\n     *\n     */\n    $scope.msgInbox = []\n    $scope.msgOutbox = {\n        'textMsg': ''\n    }\n    $scope.msgPosInfo = []\n    function onTextMsg(data) {\n        var isMe     = $rootScope.socket.id === data.id,\n            isBottom = syPosHelper.isBottom($scope.isScrollDown) || $scope.isScrollDown;\n        $scope.$apply(function (){\n            $scope.msgInbox.push({\n                'isMe'      : isMe,\n                'isImg'     : data.img_list.length > 0,\n                'isShowDate': syMsgHelper.isShowDate(data.date),\n                'date'      : data.date,\n                'msg'       : syMsgHelper.msgSanitization(data.msg, data.img_list),\n                'username'  : data.username,\n            })\n            if (data.img_list.length > 0){\n                $scope.img_list[data.date] = syMsgHelper.imgSanitization(data.img_list)\n            }\n        })\n        /* 新消息抵達時：\n         *      當用戶處於 chat_box 底部，滾動到底部\n         *      若不處於 chat_box，新消息提醒\n         *      當用戶回滾查看歷史消息時，新消息提醒\n         *      當用戶發送新消息時，滾動到底部\n         *\n         */\n        if ((isBottom || isMe) && $scope.isChatBox){\n            syPosHelper.scrollToPos()\n        } else if (data.at && data.at.indexOf('@' + decodeToken.username) >= 0){\n            $scope.newMsgNotify('atMsg', data.username, data.date)\n        } else if (!isMe && !$scope.contentItem){\n            $scope.newMsgNotify('newMsg', '新消息')\n        }\n        // 存儲消息頂部與底部位置\n        $scope.msgPosInfo.push({\n            'id': data.date,\n            'topPos': syPosHelper.getElemTopPos(data.date),\n            'bottomPos': syPosHelper.getElemBottomPos(data.date)\n        })\n    }\n    $scope.emitTextMsg = function (){\n\n        var at_list = $scope.msgOutbox.textMsg.match(/\\@([^\\s\\@]){1,16}/g)\n        // 屏蔽純空白輸入，由於 ngInput 默認 trim，故只需判斷是否為空，無需判斷空白字符\n        if ($scope.msgOutbox.textMsg !== ''){\n            $rootScope.socket.emit('textMsg', {\n                'id'      : $rootScope.socket.id,\n                'msg'     : $scope.msgOutbox.textMsg,\n                'username': $scope.infoBox.username,\n                'at'      : at_list\n            })\n            // 重置 `$scope.atUser` & `$scope.msgOutbox.textMsg`\n            $scope.atUser = ''\n            $scope.msgOutbox.textMsg = ''\n        }\n        $scope.isZoomIn = false\n    }\n    /*\n     **************\n     * Socket.IO\n     **************\n     */\n    function connectSIO(){\n        $rootScope.socket = io(':80', {\n            'query': 'token=' + token\n            // 'secure': true\n        })\n        $rootScope.socket.on('connect', function (){\n            // 獲取最近的十條消息\n            $rootScope.socket.emit('latestMsg', $scope.msgInbox.length >= 0)\n            $rootScope.socket.on('latestMsg', function (data){\n                var data_len = data.length\n                for (var i = 0; i < data_len; i++){\n                    $scope.$apply(function (){\n                        $scope.msgInbox.push({\n                            'isMe'      : decodeToken.username === data[i].username,\n                            'isImg'     : data[i].img_list.length > 0,\n                            'isShowDate': (i === 0) ? true : false,\n                            'date'      : data[i].date,\n                            'msg'       : syMsgHelper.msgSanitization(data[i].msg, data[i].img_list),\n                            'username'  : data[i].username\n                        })\n                        if (data[i].img_list.length > 0){\n                            $scope.img_list[data[i].date] = syMsgHelper.imgSanitization(data[i].img_list)\n                        }\n                    })\n                    // 存儲消息頂部與底部位置\n                    $scope.msgPosInfo.push({\n                        'id': data[i].date,\n                        'topPos': syPosHelper.getElemTopPos(data[i].date),\n                        'bottomPos': syPosHelper.getElemBottomPos(data[i].date)\n                    })\n                }\n            })\n        })\n        /* 新文本消息抵達 */\n        $rootScope.socket.on('textMsg', function (msg){\n            onTextMsg(msg)\n        })\n         /* 有用戶加入 */\n        $rootScope.socket.on('userJoin', function (msg){\n            $scope.onUserIO(msg)\n        })\n         /* 有用戶退出 */\n        $rootScope.socket.on('disconnect', function (msg){\n            $scope.onUserIO(msg)\n        })\n    }\n    function reconnectSIO(){\n        console.log('reconnect')\n        $rootScope.socket.disconnect()\n        $rootScope.socket.connect(':80')\n        $rootScope.socket.on('textMsg', function (msg){\n            onTextMsg(msg)\n        })\n    }\n    if (!$rootScope.socket){\n        connectSIO()\n    } else {\n        reconnectSIO()\n    }\n\n}])","angular.module('ShinyaApp.forgotController', [])\n.controller('forgotController', ['$scope', '$http', '$timeout', '$location', function($scope, $http, $timeout, $location){\n    /*\n     **********\n     * 消息提醒\n     **********\n     *\n     *  `$scope.isMsgNotify`：是否為消息提醒\n     *  `$scope.errMsg`：錯誤消息\n     *  `$scope.okMsg`：成功消息\n     *  `$scope.msgNotify`：觸發消息提醒\n     *\n     */\n    $scope.isMsgNotify = false\n    $scope.errMsg = ''\n    $scope.okMsg = ''\n    $scope.msgNotify = function (type, msg){\n        if (type === 'error'){\n            $scope.input_shake_animate = true\n            $scope.errMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.errMsg = ''\n                $scope.input_shake_animate = false\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else if (type === 'ok'){\n            $scope.okMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.okMsg = ''\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else {\n            console.error('[TypeError]: Not `error` or `ok`')\n        }\n    }\n    /*\n     **********\n     * 忘記密碼\n     **********\n     *  `$scope.forgot`：存儲用戶需提交的信息\n     *  `$scope.step`：當前處於第幾步\n     *  `$scope.returnToPreviousStep`：返回上一步\n     *  `$scope.gotoStepThree`：跳轉到第三步\n     *  `$scope.forgotEmailSubmit`：提交「電郵地址」\n     *  `$scope.forgotCodeSubmit`：提交「驗證碼」和「新密碼」\n     */\n    $scope.forgot = {}\n    $scope.step = 1\n    $scope.returnToPreviousStep = function (){\n        if ($scope.step === 1){\n            $location.path('/')\n        } else {\n            $scope.step = $scope.step - 1\n        }\n    }\n    $scope.gotoStepThree = function (){\n        $scope.step = 3\n        $scope.msgNotify('ok', '請輸入新密碼')\n    }\n    $scope.forgotEmailSubmit = function (){\n\n        $http.\n        post('/forgot_email', {\n            \"email\": $scope.forgot.email\n        }).\n        success(function (data, status, headers, config){\n            $scope.step = 2\n            $scope.msgNotify('ok', data.msg)\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.forgot = {}\n    }\n    $scope.forgotCodeSubmit = function (){\n\n        $http.\n        post('/forgot_code', {\n            'code': $scope.forgot.code,\n            'password': $scope.forgot.password\n        }).\n        success(function (data, status, headers, config){\n            $scope.msgNotify('ok', data.msg)\n            $timeout(function (){\n                $location.path('/')\n            }, 2000)\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.forgot = {}\n    }\n}])","angular.module('ShinyaApp.submitController', [])\n.controller('submitController', ['$scope', '$http', '$timeout', '$location', '$route', '$window', 'jwtHelper', 'store',\n    function ($scope, $http, $timeout, $location, $route, $window, jwtHelper, store){\n\n    /*\n     **********\n     * 消息提醒\n     **********\n     *\n     *  `$scope.isMsgNotify`：是否為消息提醒\n     *  `$scope.errMsg`：錯誤消息\n     *  `$scope.okMsg`：成功消息\n     *  `$scope.msgNotify`：觸發消息提醒\n     *\n     */\n    $scope.isMsgNotify = false\n    $scope.errMsg = ''\n    $scope.okMsg = ''\n    $scope.msgNotify = function (type, msg){\n        if (type === 'error'){\n            $scope.input_shake_animate = true\n            $scope.errMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.errMsg = ''\n                $scope.input_shake_animate = false\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else if (type === 'ok'){\n            $scope.okMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.okMsg = ''\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else {\n            console.error('[TypeError]: Not `error` or `ok`')\n        }\n    }\n    /*\n     **********\n     * 驗證相關\n     **********\n     */\n    // token 腐爛，觸發提醒\n    if (!!store.get('id_token')){\n        if (jwtHelper.isTokenExpired(store.get('id_token'))){\n            // 此時 $scope.msgNotify 方法還沒定義\n            $timeout(function (){\n                $scope.msgNotify('ok', '請重新登錄')\n            }, 0)\n        }\n    }\n    // 監聽開啟／關閉「位置服務」\n    $scope.$on('turnOnGeoServices', function (msg){\n        $timeout(function (){\n            $scope.msgNotify('ok', '驗證身份以開啟服務')\n        }, 0)\n    })\n    $scope.$on('turnOffGeoServices', function (msg){\n        $timeout(function (){\n            $scope.msgNotify('ok', '驗證身份以取消服務')\n        }, 0)\n    })\n\n    /*\n     **********\n     * 頁面切換\n     **********\n     */\n    $scope.isLogin = true;\n    $scope.toggleSubmit = function (){\n        $scope.isLogin = !$scope.isLogin\n    }\n    /*\n     ************\n     * 登陸／註冊\n     ************\n     *\n     *  `$scope.login`：緩存登陸信息\n     *  `$scope.register`：緩存註冊信息\n     *  `$scope.loginSubmit`：處理登陸\n     *  `$scope.registerSubmit`：處理註冊\n     *\n     */\n    $scope.login = {}\n    $scope.register = {}\n    $scope.loginSubmit = function (){\n\n        $http.\n        post('/login', {\n            \"user\": $scope.login.user,\n            \"password\": $scope.login.password\n        }).\n        success(function (data, status, headers, config){\n            store.set('id_token', data.token)\n            $location.path('/chat').replace()\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.login = {}\n    }\n    $scope.registerSubmit = function (){\n        $http.\n        post('/register', {\n            \"username\": $scope.register.username,\n            \"email\": angular.lowercase($scope.register.email), \n            \"password\": $scope.register.password\n        }).\n        success(function (data, status, headers, config){\n            $scope.msgNotify('ok', data.msg)\n            // switch to [login]\n            $scope.toggleSubmit()\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.register = {}\n    }\n}])\n"],"sourceRoot":"/source/"}
{"version":3,"sources":["core.js","sy-autofocus.js","sy-autoscroll.js","sy-beep.js","sy-hideKeyboard.js","sy-imageonload.js","sy-img.js","sy-logo.js","sy-msgNotify.js","sy-usercount.js","sy-geoHelper.js","sy-msgHelper.js","sy-posHelper.js","sy-timeHelper.js","chatController.js","forgotController.js","submitController.js"],"names":["angular","module","config","$routeProvider","$locationProvider","$httpProvider","jwtInterceptorProvider","html5Mode","when","templateUrl","controller","otherwise","redirectTo","tokenGetter","store","get","interceptors","push","$rootScope","$scope","$timeout","$location","$route","$window","jwtHelper","detectmob","ua","navigator","userAgent","match","isLogoLoaded","isSubmit","lastInfo","isMobile","standalone","$on","event","current","pre","next","token","path","isTokenExpired","replace","msg","$broadcast","directive","restrict","link","scope","elem","attr","focus","syPosHelper","attrs","pos","getNowPos","bind","now_pos","isScrollDown","isBottom","$apply","viewedMsg","template","atMsg","id","isAtMsgShow","document","getElementById","querySelector","classList","add","remove","scrollToSpecPos","isViewMsg","contentItem","getElemTopPos","scrollToPos","msgNotifyBox","type","isChatBox","isZoomIn","isShowAtUserBox","toggleCurrentPage","newMsgNotify","inputElem","find","blur","toggleClass","isImageLoaded","replaceWith","Vivus","duration","animTimingFunction","EASE_OUT_BOUNCE","isImgBoxRight","img_list","now_img_list","now_zoom_id","imgURL","toggleImgBox","obj","isMe","date","equals","toggleImageSize","url","replay","logo_group","element","vivus_logo","pathTimingFunction","EASE_IN","css","stroke","fill","reset","play","webkitTransition","transition","$watch","newVal","removeClass","errMsg","addClass","okMsg","console","error","value","userCountNotify","userCount","onlineUser","onUserIO","count","service","distanceHelper","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","weather_condition_codes","200","icon","201","202","210","211","212","221","230","231","232","300","301","302","310","311","313","314","321","500","501","502","503","504","511","520","521","522","531","600","601","602","611","612","615","616","620","621","622","701","711","721","731","741","751","761","771","781","800","801","802","803","804","900","901","902","903","904","905","906","951","952","953","954","955","956","957","958","959","960","961","962","flat_list","this","getCityWeatherType","code","getGeoWeatherType","isNight","indexOf","getDistance","origin","destination","distance","lat","lon","sinaImgHelper","img_url","size","now","Date","isShowDate","msgSanitization","number","list_len","length","i","imgSanitization","cache","small","medium","large","nowPos","chatBoxHeight","clientHeight","storeNowPos","scrollTop","offsetTop","getElemBottomPos","setNowPos","getBottomPos","chatBoxElem","scrollHeight","target_pos","scrollTo","then","partsOfADay","hour","getNumero","numero","getDaytimeOrNight","getDayMs","UTC","getUTCFullYear","getUTCMonth","getUTCDate","isSameDay","last","$http","$filter","syTimeHelper","syGeoHelper","syMsgHelper","resetNewsSetting","isTodayNews","isShowNewsOptions","isOtherDateNews","isShowPreOrNextHour","preHour","nextHour","selectDate","isShowPreHour","getHours","isShowNextHour","resetWeatherIcon","color","children","contents","onTextMsg","data","socket","msgInbox","isImg","username","at","decodeToken","listenSIO","on","emit","data_len","connectSIO","io","query","secure","reconnectSIO","disconnect","connect","removeOneDayNews","ls","localStorage","len","reg","j","test","key","isSun","isInfoBox","isLoadErr","toggleChatBox","action","isResetNewsSetting","currentPage","currentPageIs","name","geoBox","infoBox","title","country","weather","description","partWeather","togglePartWeather","otherUserInfo","otherUserInfoId","toggleOtherUserInfo","post","success","status","headers","info","pure_date","set","getOtherDateNews","getSelectedDateNews","isNewsExist","toggleNewsExist","newsErrMsg","newsDateTitle","selectDateNewsBox","selectCountry","timezoneOffset","getTimezoneOffset","one_day_news","getNamespacedStore","callback","loadTimer","cancel","quit","storeOneDayNews","news_id","news","tomorrow","statefulGetSelectedDateNews","toggleTodayNews","selectNextCountry","country_list","newsDate","isOneDayNews","selectDateNews","gotoSettingBox","isMuted","toggleMuted","isGeoServices","toggleGeoServices","$emit","weatherBox","getGeoServices","geolocation","getCurrentPosition","coords","latitude","longitude","last_code","last_geo","last_isNight","now_code","now_geo","now_isNight","last_weather","now_weather","file","atUser","toggleAtUserBox","isUserOnline","slice","oldVal","at_list","at_list_len","at_user_len","splice","removeAtUser","RegExp","msgOutbox","textMsg","addAtUser","concat","emitTextMsg","lastUser","nextStep","location","reload","isMsgNotify","msgNotify","input_shake_animate","forgot","step","returnToPreviousStep","gotoStepThree","forgotEmailSubmit","email","forgotCodeSubmit","password","isLogin","toggleSubmit","login","register","loginSubmit","user","registerSubmit","lowercase"],"mappings":"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","file":"sy.min.js","sourcesContent":["angular.module('ShinyaApp', [\n    'ngRoute',\n    'ngTouch',\n    'ngAnimate',\n    'angular-jwt',\n    'angular-storage',\n    'ShinyaApp.posHelperServices',\n    'ShinyaApp.timeHelperServices',\n    'ShinyaApp.geoHelperServices',\n    'ShinyaApp.msgHelperServices',\n    'ShinyaApp.logoDirective',\n    'ShinyaApp.notifyDirective',\n    'ShinyaApp.autofocusDirective',\n    'ShinyaApp.hideKeyboardDirective',\n    'ShinyaApp.imageonloadDirective',\n    'ShinyaApp.autoscrollDirective',\n    'ShinyaApp.imgDirective',\n    'ShinyaApp.beepDirective',\n    'ShinyaApp.usercountDirective',\n    'ShinyaApp.submitController',\n    'ShinyaApp.chatController',\n    'ShinyaApp.forgotController',\n    'duScroll'\n    ])\n.config(['$routeProvider', '$locationProvider', '$httpProvider', 'jwtInterceptorProvider', \n    function ($routeProvider, $locationProvider, $httpProvider, jwtInterceptorProvider) {\n    // $locationProvider.html5Mode(false).hashPrefix('!')\n    $locationProvider.html5Mode(true)\n    $routeProvider.\n        when('/', {\n            templateUrl: '/public/dist/submit.min.html',\n            controller: 'submitController'\n        }).\n        when('/chat', {\n            templateUrl: '/public/dist/chat.min.html',\n            controller: 'chatController'\n        }).\n        when('/forgot', {\n            templateUrl: '/public/dist/forgot.min.html',\n            controller: 'forgotController'\n        }).\n        otherwise({\n            redirectTo: '/'\n        })\n    jwtInterceptorProvider.tokenGetter = ['store', function(store) {\n        return store.get('id_token')\n    }]\n    $httpProvider.interceptors.push('jwtInterceptor')\n}])\n.controller('rootController', ['$rootScope', '$scope', '$timeout', '$location', '$route', '$window', 'jwtHelper', 'store', \n    function($rootScope, $scope, $timeout, $location, $route, $window, jwtHelper, store){\n    \n    $scope.isLogoLoaded = false\n    $rootScope.isSubmit = true\n    // 存儲註銷用戶前的信息\n    // index:\n    //     0: 上次註銷用戶名\n    //     1: 登陸後的「下一步動作」\n    $rootScope.lastInfo = []\n\n    // 檢測是否為手機瀏覽器\n    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n    function detectmob() { \n        var ua = $window.navigator.userAgent;\n        if(\n            ua.match(/Android/i)\n            || ua.match(/webOS/i)\n            || ua.match(/iPhone/i)\n            || ua.match(/iPad/i)\n            || ua.match(/iPod/i)\n            || ua.match(/BlackBerry/i)\n            || ua.match(/Windows Phone/i)\n        ){\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    $rootScope.isMobile = detectmob()\n\n    // 檢測是否為全屏模式\n    if (!$window.navigator.standalone && $rootScope.isMobile){\n        // TODO\n    }\n\n    /* 檢查 token\n     *  - 不存在\n     *  - 存在，腐爛：觸發提醒（submitController 處理）\n     *  - 存在，新鮮：跳轉到 '/chat'\n     */\n    // 必須 $routeChangeStart 攔截，否則若 token 過期，socket.io 握手不成功\n    $scope.$on('$routeChangeStart', function (event, current, pre, next){\n        var token = store.get('id_token')\n        if ($location.path() === '/'){\n            token\n            ? !jwtHelper.isTokenExpired(token)\n                ? $location.path('/chat').replace()\n                : null\n            : null\n        } else if ($location.path() === '/chat'){\n            !token || jwtHelper.isTokenExpired(token)\n            ? $location.path('/').replace()\n            : null\n        }\n    })\n    // 監聽開啟／關閉「位置服務」\n    $scope.$on('preTurnOnGeoServices', function (msg){\n        $timeout(function (){\n            $scope.$broadcast('turnOnGeoServices', msg)\n        }, 100)\n    })\n    $scope.$on('preTurnOffGeoServices', function (msg){\n        $timeout(function (){\n            $scope.$broadcast('turnOffGeoServices', msg)\n        }, 100)\n    })\n}])","angular.module('ShinyaApp.autofocusDirective', [])\n.directive('syAutofocus', ['$rootScope', '$timeout', function ($rootScope, $timeout){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            if (!$rootScope.isMobile){\n                $timeout(function (){\n                    elem[0].focus()\n                })\n            }\n        }\n    }\n}])","angular.module('ShinyaApp.autoscrollDirective' ,[])\n.directive('syAutoscroll', ['syPosHelper', function (syPosHelper){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attrs){\n            var pos = syPosHelper.getNowPos()\n            elem.bind('scroll', function (){\n                var now_pos = syPosHelper.getNowPos()\n                if (now_pos >= pos && syPosHelper.getNowPos() > 0){\n                    // Scroll Down\n                    scope.isScrollDown = true\n                } else {\n                    // Scroll Up\n                    scope.isScrollDown = false\n                }\n                pos = now_pos\n                if (syPosHelper.isBottom(scope.isScrollDown)){\n                    scope.$apply(function (){\n                        scope.viewedMsg(2)\n                    })\n                }\n            })\n        }\n    }\n}])","angular.module('ShinyaApp.beepDirective', [])\n.directive('syBeep', ['$timeout', 'syPosHelper', function ($timeout, syPosHelper){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div class=\"all_notify_box general_animate\" ng-if=\"!isViewMsg\" id=\"notify_box\">'\n                +   '<span ng-click=\"viewedMsg(1)\">{{msgNotifyBox.msg}}</span>'\n                +   '<audio ng-if=\"!isMuted\" autoplay>'\n                +       '<source src=\"public/sound/beep.ogg\" type=\"audio/ogg\">'\n                +       '<source src=\"public/sound/beep.m4a\" type=\"audio/x-m4a\">'\n                +   '</audio>'\n                +   '<audio ng-if=\"isMuted\" autoplay muted>'\n                +       '<source src=\"public/sound/beep.ogg\" type=\"audio/ogg\">'\n                +       '<source src=\"public/sound/beep.m4a\" type=\"audio/x-m4a\">'\n                +   '</audio>'\n                + '</div>',\n        controller: ['$scope', function ($scope){\n            /*\n             * 新消息抵達提醒\n             *      `$scope.isViewMsg`：新消息是否已閱\n             *      `$scope.msgNotifyBox`：提醒消息的內容\n             *      `$scope.isAtMsg`：判斷是否為提到（@）你的信息\n             *      `$scope.contentItem`：存儲提到（@）你的消息 id\n             */\n            $scope.isViewMsg = true\n            $scope.msgNotifyBox = {}\n            $scope.contentItem = 0\n            /* 滾動到消息位置後改變消息樣式 */\n            $scope.isAtMsgShow = false\n            function atMsg(id){\n                $scope.isAtMsgShow = true\n                var elem = document.getElementById(id).querySelector('.content_box')\n                elem.classList.add('atMsg')\n                $timeout(function (){\n                    elem.classList.remove('atMsg')\n                    $timeout(function (){\n                        $scope.isAtMsgShow = false\n                    }, 717)\n                }, 717)\n            }\n            function scrollToSpecPos(){\n                $scope.isViewMsg = true\n                if ($scope.contentItem){\n                    // 有用戶提到（@）你，滾動到相應位置\n                    var pos = syPosHelper.getElemTopPos($scope.contentItem)\n                    syPosHelper.scrollToPos(pos || null, $scope.isScrollDown)\n                    atMsg($scope.contentItem)\n                    $scope.contentItem = 0\n                } else {\n                    // 新消息，滾動到底部\n                    syPosHelper.scrollToPos(null, $scope.isScrollDown)\n                }   \n            }\n            $scope.viewedMsg = function (type){\n                // 當前不處於 chat_box，切換到 chat_box 後滾動\n                if (!$scope.isChatBox){\n                    if (!$scope.isChatBox){\n                        // 從 `geo_box` / `news_box` 返回 `chat_box` 時，重置 `user_info_box`\n                        $scope.toggleCurrentPage('infoBox')\n                    }\n                    $scope.isChatBox = !$scope.isChatBox\n                    $timeout(function (){\n                        scrollToSpecPos()\n                    })\n                } else {\n                    if (type === 1){\n                        $scope.isZoomIn = false\n                        $scope.isShowAtUserBox = false\n                        // 滾動並抹除提醒\n                        scrollToSpecPos()\n                    } else if (type === 2){\n                        // 不滾動，只抹除提醒\n                        $scope.isViewMsg = true\n                    }\n                }\n\n            }\n            $scope.newMsgNotify = function(type, msg, pos){\n                $scope.$apply(function (){\n                    if (type === 'newMsg'){\n                        $scope.msgNotifyBox = {\n                            'type': 'newMsg',\n                            'msg' : msg\n                        }\n                        $scope.isViewMsg = false\n                    } else if (type === 'atMsg'){\n                        $scope.msgNotifyBox = {\n                            'type': 'atMsg',\n                            'msg' : '@' + msg + ' 提到了你'\n                        }\n                        $scope.contentItem = pos\n                        $scope.isViewMsg = false\n                    }\n                })\n            }\n        }]\n    }\n}])","angular.module('ShinyaApp.hideKeyboardDirective', [])\n.directive('syHideKeyboard', ['$rootScope', function ($rootScope){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            var inputElem = elem.find('input');\n            if ($rootScope.isMobile){\n                elem.bind('submit', function (){\n                    inputElem[0].blur()\n                })\n            }\n        }\n    }\n}])","// via http://stackoverflow.com/a/17884754/3786947\nangular.module('ShinyaApp.imageonloadDirective', [])\n.directive('syImageonload', ['$rootScope', '$timeout', function ($rootScope, $timeout){\n    return {\n        restrict: 'A',\n        link: function(scope, elem, attr) {\n            elem.toggleClass('loding')\n            elem.bind('load', function() {\n                elem.toggleClass('loding')\n                scope.$apply(function (){\n                    scope.isImageLoaded = true\n                })\n            })\n            elem.bind('error', function (){\n                if (elem.attr('ng-class') === '{\\'zoom_out\\': isZoomIn && $index === now_zoom_id}'){\n                    // #img_box\n                    elem.attr('src', 'data:image/jpg;base64,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')\n                } else {\n                    // #img_fullscreen_box\n                    elem.next().remove()\n                    elem.replaceWith('<svg id=\"vivus_img_load_err\" width=\"200\" height=\"200\" viewBox=\"0 0 530 531\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\"><path d=\"M51.249 150.754c-3.454-1.73-5.458-.099-4.478 3.638l.706 2.688c8.007 30.503-2.998 73.868-24.584 96.861l-.662.706c-2.644 2.816-1.65 5.288 2.192 5.521l136.651 8.259c9.377.567 23.956-2.028 32.559-5.794l21.283-9.316-13.767-18.806c-5.549-7.58-16.85-17.132-25.253-21.34l-124.647-62.418z\" fill=\"#000\"/><path d=\"M9.298 290.938c13.001 129.203 122.073 230.062 254.702 230.062 141.385 0 256-114.615 256-256s-114.615-256-256-256c-84.794 0-159.96 41.226-206.547 104.728\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M361.259 190.733c-4.06-1.129-8.339-1.733-12.759-1.733-26.234 0-47.5 21.266-47.5 47.5 0 4.115.523 8.109 1.507 11.917\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\"/><path d=\"M213.468 406.97c13.141-16.776 37.347-28.026 65.032-28.026 30.37 0 56.552 13.538 68.536 33.056\" stroke=\"#000\" stroke-width=\"17\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></g></svg>')\n                    new Vivus('vivus_img_load_err', {type: 'delayed', duration: 77, animTimingFunction: Vivus.EASE_OUT_BOUNCE})\n                    scope.$apply(function (){\n                        scope.isImageLoaded = true\n                    })\n                }\n            })\n        }\n    }\n}])","angular.module('ShinyaApp.imgDirective', [])\n.directive('syImg', function (){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div ng-if=\"now_img_list.length > 0\" id=\"img_box\" class=\"general_animate\" ng-class=\"{\\'me\\': isImgBoxRight, \\'mobile\\': isMobile}\">'\n                +   '<ul>'\n                +       '<li ng-repeat=\"url in now_img_list\" class=\"general_animate\">'\n                +           '<img class=\"general_box_shadow general_animate\" ng-src=\"{{url.small}}\" ng-class=\"{\\'zoom_out\\': isZoomIn && $index === now_zoom_id}\" ng-click=\"toggleImageSize(url, $index)\" sy-imageonload>'\n                +       '</li>'\n                +   '</ul>'\n                + '</div>',\n        controller: ['$scope', '$timeout', function ($scope, $timeout){\n            /*\n             **************\n             * 圖片消息相關\n             **************\n             * \n             *  `$scope.isZoomIn`：圖片是否放大\n             *  `$scope.isImgBoxRight`：`img_box` 是否右浮\n             *  `$scope.isImageLoaded`：大圖是否已經加載完畢\n             *  `$scope.img_list`：存儲消息中所有的圖片消息\n             *  `$scope.now_img_list`：現在閱覽中的消息中中的圖片\n             *  `$scope.now_zoom_id`：現在閱覽中的圖片的 $index\n             *  `$scope.imgURL`：現在閱覽中的大圖的 URL\n             *  `$scope.toggleImgBox`：處理顯示／隱藏 `img_box`\n             *  `$scope.toggleImageSize`：處理打開／關閉大圖\n             *\n             */\n            $scope.isZoomIn = false\n            $scope.isImgBoxRight = false\n            $scope.isImageLoaded = false\n            $scope.img_list = {}\n            $scope.now_img_list = []\n            $scope.now_zoom_id = -1\n            $scope.imgURL = ''\n            $scope.toggleImgBox = function (obj){\n                var isMe = obj.isMe,\n                    id   = obj.date;\n                if ($scope.now_img_list !== $scope.img_list[id] && angular.equals($scope.now_img_list, [])){\n                    // 現在不存在已打開的圖片預覽，直接打開\n                    $scope.isImgBoxRight = isMe\n                    $scope.now_img_list = $scope.img_list[id]\n                } else if ($scope.now_img_list !== $scope.img_list[id] && !angular.equals($scope.now_img_list, [])){\n                    // 現在存在已打開的圖片預覽，先關閉，再打開\n                    $scope.now_img_list = []\n                    $timeout(function (){\n                        $scope.isImgBoxRight = isMe\n                        $scope.now_img_list = $scope.img_list[id]\n                    }, 717)\n                } else {\n                    // 關閉圖片預覽\n                    $scope.now_img_list = []\n                }\n            }\n            $scope.toggleImageSize = function (url, id){\n                if (url && id !== $scope.now_zoom_id){\n                    // 切換大圖時，先 DOM 移除元素，再重新 DOM 插入元素\n                    // 使 `syImageonload` Directive 重載\n                    $scope.isZoomIn = false\n                    $timeout(function (){\n                        $scope.isZoomIn = true\n                    })\n                    $scope.imgURL = url\n                    $scope.now_zoom_id = id\n                    $scope.isImageLoaded = false\n                } else {\n                    $scope.isZoomIn = false\n                    $scope.now_zoom_id = -1\n                }\n            }\n        }]\n    }\n})","angular.module('ShinyaApp.logoDirective', [])\n.directive('syLogo', ['$timeout', function ($timeout){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div id=\"logo\" class=\"general_animate\" ng-show=\"isSubmit || !isMobile\" ng-class=\"{\\'logo_loaded\\': isLogoLoaded}\">'\n                +     '<div class=\"vertically_center\">'\n                +         '<svg ng-click=\"replay()\" id=\"vivus_logo\" viewBox=\"0 0 205 224\" xmlns=\"http://www.w3.org/2000/svg\">'\n                +             '<g id=\"logo_group\" stroke=\"#000\" fill=\"none\">'\n                +                 '<g>'\n                +                     '<path id=\"shen\" d=\"M169.35 70.387v.539c0 .154.693 1.001.847 1.155l1.54 1.54 1.155 1.463c.308.231.847.385 1.309.385.385 0 .847 0 .847-.539v-3.157c0-3.696-.154-7.238-.308-10.934 0-1.001.154-1.309-.154-2.156v-4.389c-.154-.462-.154-1.155-.154-1.617v-1.232c0-.154 0-1.155.616-1.155l.693.693.539.154c.154 0 1.001.693 1.155.847l.308.308.385.693c.616 1.001 1.463 1.848 2.156 2.695.154.154.847 1.001.847 1.001.154.154 1.463 1.463 1.617 1.694l.539.77.539.539.308.539 1.694 2.002 1.155 1.155.154.308c.154.154.539.847.539.847l.462.539c.385.308 1.848 2.002 2.002 2.31l.385.539c.308.462 1.309 1.463 2.002 1.463 3.003 0 5.852-.847 8.701-1.155.308-.154 1.001-.693 1.001-1.001v-.154c-.154-.539-.308-1.001-.847-1.155l-1.155-.231-.539-.154-.616-.154c-.539-.154-2.233-.847-2.387-.847l-1.001-.693-2.541-1.463c-.154 0-.462-.385-.616-.539l-.693-.616-1.001-.539c-.308-.154-1.848-1.309-2.156-1.54-.693-.616-3.542-3.619-4.235-4.312l-1.309-1.54-2.541-2.464-.308-.539c-.154-.154-.693-.847-.693-.847l-3.157-3.311c-.385-.385-.539-.539-.539-.847v-.231c1.386-1.155 2.541-1.001 4.235-1.155l1.001-.154 2.002-.154.462-.154c1.848-.154 3.696-.154 5.544-.539l.693-.154h1.155l1.001-.154h2.849c.847 0 1.694-.385 2.541-.539l2.31-.154c.231 0 .231-.154.231-.308 0-.847-2.541-2.387-2.849-2.849-.231-.154-.693-1.001-.847-1.232l-.693-.462c-.539-.539-.693-1.155-1.54-1.155h-.154l-.462.308c-.385.154-1.54 1.001-1.694 1.001-.154.154-1.386.693-1.694.847l-.462.154-.693.539-.847.154c-.154 0-1.309.462-1.54.462l-1.463.231-2.233.616-1.463.231-.539.154-.616.154c-1.232.154-2.233.462-3.388.693l-2.695.308h-.154c-.308 0-.462-.154-.693-.308v-.693c0-1.54 0-3.542.385-5.005l.308-.539.154-.539c-.462.231-.616 0-.616-.462 0-.847 1.001-1.386 1.001-2.156v-.231s-.385-.308-.539-.462l-1.001-.693-1.001-.462-1.001-.693-1.694-.847-1.155-.693h-.308c-.385 0-.693 0-.693.385v.154c.847 1.463 1.155 2.541 1.694 4.158l.616 2.002v.693l.154.539.231 1.001c.308.154.462.154.462.462 0 .385-.308.539-.308.847 0 .385.154.539.308.847 0 .539.154 2.387.154 2.849v.154c0 .154 0 .385-.154.385-2.31-.231-4.543.616-6.853 1.001l-.847.154c-.847.154-1.694.693-2.541.693h-2.156l-1.001.154-.308.154h-1.232l-3.157.462c-1.155.231-2.31.231-3.388.693v.154l.231.231 5.852 2.849h.154c1.001 0 1.694-.385 2.695-.693.847-.154 1.694-.308 2.541-.539 1.155-.308 2.31-.847 3.619-1.001h1.078l1.463-.308c.539 0 .693.693.693 1.155 0 .154-1.001 1.694-1.155 2.002-1.001 1.694-2.233 3.08-3.388 4.543l-.308.539-2.233 2.002c-1.309 1.463-2.464 2.849-4.004 4.158-.154.154-3.311 2.849-4.543 3.696l-.616.539c-1.694 1.309-2.695 2.31-4.543 3.465l-.693.385-1.001.847c-.154.154-1.309.616-1.54.616l-.616.539-1.694.847c-.154.154-.847.462-.847.847h-.847l-.308.308c-.539.308-1.386.308-1.848.693l-.308.308c-.385.154-.693-.693-.693-1.001 0-.462.308-.847.847-.847.462-1.001.616-2.31.847-3.542l.154-1.617c0-.231.616-.847.616-1.001.539-.847.385-1.848.693-2.695l.693-1.386s.154-.308.154-.462l.154-.847.539-.693c.462-.847.693-1.694 1.155-2.464 0-.231.539-.693.539-.847l.616-2.079.385-.462.154-1.001 1.001-3.003c.154-.693.154-1.232.462-1.694l.693-1.001s.154-1.386.308-1.848v-.154c0-.231.231-.847.231-.847l.847-1.694.308-1.694c0-.154.154-.616.154-.616.693-2.079 2.156-3.542 1.848-5.929.154-.154.154-.308.154-.462v-.385c0-.154-.154-.616-.154-.616h-.308s-.693 1.155-.847 1.617c-.847 1.694-1.386 3.388-2.002 5.082-.385.847-1.001 1.694-1.54 2.464l-.154.539-.539.539c-.462.77-1.155 2.002-1.463 3.003 0 .154-.385.847-.385.847-.462 1.155-1.309 2.002-2.002 3.157-.616 1.309-1.309 2.849-1.848 4.158-.154.693-.616 1.232-1.001 1.848l-.154.539c0 .154-.308.847-.462 1.001l-.539.847c-.539 1.155-.693 2.849-1.694 3.85-.308.308-1.463 1.54-1.848 1.848l-1.309-.539c-.308 0-.539.385-.539.539 0 2.156 1.232 3.696 2.233 5.39.154.154.847 1.617 1.001 1.848l1.001 1.463.462.847.539.154.462.539h.231c.77-.308 1.463-.154 2.31-.308 1.54-.539 2.695-1.386 4.004-2.079l1.694-.616c.154 0 .693-.385.693-.385l.308-.308 1.001-.308.539-.385c.154-.154.616-.462.847-.462.616-.385 1.155-.539 1.848-.847l1.309-.693 1.155-.847c1.386-.847 2.695-1.463 3.85-2.464.154-.231 1.386-1.232 1.54-1.386l1.309-1.001 1.232-1.001.308-.308c.154-.231 1.155-.693 1.309-.847l1.001-1.001.847-.693.385-.308 1.155-1.386.308-.308c1.54-1.54 3.003-2.849 4.389-4.543 0 0 .308-.693.693-.693.154 0 .308.539.308.693 0 .539.308 2.695.308 3.003v2.695l-.308 2.002v.385l.154.616v4.081c0 .462-.308 2.464-.308 3.003-.385 1.001-1.386 1.463-1.386 2.464zm-17.094-34.881c0 .231 0 .539.154.539h.231c.308 0 1.463-.308 1.463-.308.385-.231 1.386-.539 1.54-.693l2.156-1.694.693-.308c.154-.231 1.848-1.232 2.002-1.386l.693-.308.77-.847c.539-.539 1.232-.693 1.694-1.155.154-.154.847-1.001 1.001-1.001l.847-.231.154-.308 2.233-2.849.154-.308c1.001-1.386 2.156-2.695 3.311-4.081.539-.616 1.694-.77 1.694-1.771 0-.693-.462-1.232-1.001-1.54l-.154-.154c-.847-1.232-1.54-2.233-2.002-3.542.308-.308.847-1.001 1.309-1.001h3.696s.539.154.693.308c.462.385.308 1.54.308 1.848l.154.847v1.155l.385 2.541-.154 1.54v.154l.154.847v5.544l.308.616.154.539c.847 1.001 2.002 1.463 3.388 1.463 3.311 0 6.853-.308 10.241-.308 2.849 0 5.467.693 8.393.693.154 0 .462-.154.462-.154l.154-.231c0-.462-.308-1.001-.462-1.309-.154-.308-.693-1.155-.693-1.155l-1.694-1.694c-.308-.539-.847-1.309-1.463-1.309h-.231c-.308.154-1.617.462-2.002.616l-1.001.539-1.463.308-.539.154h-1.848l-.847.231h-2.849l-.616-.231h-.231c-.616 0-1.309.385-2.002.385-1.155 0-1.309-1.232-1.309-2.002v-3.927l-.154-3.157v-.308c0-1.232 1.463-1.386 1.463-2.387 0-.847-1.001-1.463-1.001-2.464v-.385c.693-.847 1.001-1.155 2.002-1.309.539 0 2.849-.385 3.234-.385h1.848c.154 0 .616-.308.847-.308h.308c.154 0 .308 0 .462.308h1.694c.385 0 .693.231.693.539 0 .308-.539.308-.693.693-.462.847-.154 1.463-.308 2.31 0 .154-.385 1.54-.385 1.848-.308 1.386-.77 2.387-.77 3.696h.462l.847-.847.539-.847.308-.462.693-1.386 2.156-3.311.154-.154 1.001-.693c.847-.693 3.003-2.541 3.003-3.388 0-.308 0-.308-.308-.616-.154-.231-1.309-1.386-1.694-1.848 0-.231-.308-.385-.308-.385l-.847-.462c-.847-.847-1.54-1.694-2.541-2.233h-.462c-1.001 1.232-2.002 2.387-3.234 3.234-.154.154-.462.308-.462.308l-1.155.154c-.231 0-.847.385-1.001.385-1.232.462-2.233 1.001-3.388 1.309-2.849.308-5.852.693-8.701 1.155l-1.848.539c-2.156.462-4.389.693-6.545.847l-2.695.462-1.694.154c-.154 0-.616.231-.847.231-.308 0-1.463-.231-1.848-.231l-.308-.77-.308-.693-.154-2.156c-.385-.847-1.54-1.848-1.848-2.849l-.385-1.078-.616-.616c-.539-.385-1.232-1.001-1.694-1.001 0 1.001.462 1.848.693 2.849l.154 2.31.308 1.848c0 2.387-.462 5.082-.847 7.392l-.308.847-.154 1.001c-.231.308-.693 1.694-.847 1.848-.847 1.309-2.233.847-2.233 2.31v.539c1.001 1.694 1.694 3.542 2.387 5.39 0 .154.308.154.462.154.847 0 .847-2.387 1.232-3.003.462-1.001.847-1.848 1.155-2.849 0-.231.462-.847.462-1.001l1.386-4.235c0-.154.154-.462.154-.462v-1.694c.154-.154.539-.693.847-.693l1.309-.154c.385 0 2.541-.539 2.849-.539h1.001c.231 0 1.078-.308 1.232-.308h.308c.539 0 .693.308 1.155.539.539.154 1.232.154 1.232.77l-.539 1.54v.539c0 .154-.308.77-.308 1.001l-.385 1.155c-.154.462-.847 2.002-.847 2.156l-.616.847-.385.693-.616.847-.231.462c-.616 1.386-1.617 2.541-2.618 3.696l-.385.308-.847.693c-.462.539-2.464 2.541-3.003 3.003-.693.539-.847.385-1.463 1.232l-.231.154c-.154 0-.77.462-1.001.462l-1.309 1.232-.693.462v.154zm-16.94 7.392c0 .385.154 1.386.539 1.386 1.155 0 1.001-1.848 1.155-2.541 0-.308.308-1.54.308-1.694.231-.693.693-1.463.847-2.156.539-1.54 1.232-3.003 1.848-4.543.385-.847 1.694-2.156 1.694-2.695 0-1.001-.847-1.309-1.54-1.694-.308-.154-.308-.616-.616-.847-.693-.462-1.54-.308-2.387-.462l-.154-.154c-.693-1.001-1.694-1.001-2.695-1.386-1.463-.154-3.311-.154-4.851-.462-.308 0-.693 0-.693.308 0 1.54 3.234 2.387 4.081 3.003l.462.539c.693.462 1.694.847 2.156 1.54.693.616.693 1.617 1.078 2.464v.154c0 .231-.385 1.232-.385 1.386-.154.847-.308 1.463-.308 2.464v1.386c-.154 1.309-.539 2.695-.539 4.004zm5.082-21.098l.308.308c.847 0 1.694-2.849 2.002-3.311.847-1.078 1.848-1.848 2.695-3.08l.462-.847c.231-.154 1.232-1.155 1.386-1.309.154-.154.154-.308.154-.539v-.154s-.308-.462-.462-.462c-.231-.154-.847-.539-.847-.539-.385-.154-1.232.154-1.54-.154l-.462-.693c-.847-.847-3.234-1.309-4.389-1.848-1.001-.462-2.002-1.001-3.003-1.309l-1.386-.308c-.847-.385-1.309-.847-2.156-.847-.539 0-.693.154-.693.616 0 1.386 2.233 2.387 3.234 2.849.616.385 1.617 1.001 2.31 1.54.693.539 1.001.847 1.694 1.54.693.847 1.155 1.309 1.155 2.31 0 1.694-.308 3.234-.462 4.851v1.386zm29.799 26.95c0-.154 0-.308.385-.308h.154l-.385.847c-.154 0-.154-.308-.154-.539zm-32.032-18.942l.154.154c0 .231-.308.231-.462.231 0-.231 0-.385.308-.385zm2.541 23.485c0-.154.154-.154.308-.154 0 .154 0 .539-.154.539l-.154-.231v-.154zm31.878 15.477c.154 0 .154.308 0 .308-.231 0-.231-.308 0-.308zm-2.541-56.056h.308c0 .154-.154.154-.308.154v-.154zm2.31 34.419c0 .154-.154.154-.154 0 0-.231.154-.231.154 0zm-33.495 12.012h.154v.231h-.154v-.231zm53.823-49.28c0 .154-.154.154-.154 0s.154-.154.154 0zm-11.088 31.878h.154v.154h-.154v-.154zm-48.433-34.727h.154v.154l-.154-.154z\"/>'\n                +                     '<path id=\"ye\" d=\"M142.554 159.08c.77 1.309 1.848 2.849 2.849 4.004l.462.539.385.616.308.154s.462.231.693.231h.154c1.001 0 1.463-1.54 1.463-2.387l-.154-2.002c0-.308.154-.847.539-1.001h1.848s1.617-.539 2.31-.693c.154 0 .539-.154.539-.154l2.002-1.001c1.848-.693 3.85-1.155 5.544-2.002.847-.308 1.155-1.001 2.156-1.155.462-.385 2.849-1.848 3.388-2.233 0 0 .462-.308.616-.462l1.001-.847c1.001-.693 1.848-1.386 2.849-2.156h.539c.154.154 1.155.77 1.309 1.001.154.154 1.386.616 1.54.847 1.155.77 1.848 1.617 2.849 2.464l1.463 1.001c.847.539 1.54 1.386 2.387 1.848l.847.539c.462.308.693.847 1.001 1.155.693.539 1.309.693 2.002 1.155 1.155 1.232 2.31 2.387 3.696 3.234.308.154 1.001.616 1.001.616l.847.847s.462.154.693.154h.154c.462 0 .847-.154 1.155-.462 2.002-.539 3.85-1.155 5.852-1.54.539-.154 3.234-.462 3.696-.462.539-.385.693-.385.693-.847 0-1.001-1.386-1.001-2.002-1.001l-1.848-.154c-.693-.231-1.001-.693-1.694-.847l-1.848-.539-.539-.308c-.77-.385-1.617-.693-2.464-1.001l-.385-.154-.462-.385c-.154 0-1.309-.462-1.54-.462-.616-.385-1.155-.847-1.848-1.232-.616-.308-1.309-.308-1.848-.616-1.309-.847-2.31-2.233-3.85-2.695l-.462-.154c-.539-.154-2.387-1.232-2.695-1.386l-.693-.462-.847-.154-.616-.539c-.154 0-.539-.308-.539-.308-.693-.385-2.695-1.232-2.695-2.002v-.231c.385-.308 1.54-2.156 1.848-2.464l1.386-1.386.308-.462c.154-.154 2.002-2.002 2.156-2.233.231-.154.693-1.001.693-1.155l.154-.154.847-.693.154-.154 1.001-2.002.693-.847c.154-.308.847-1.001.847-1.155.462-.693.308-1.001 1.001-1.54l2.31-3.696.385-.616.847-1.232c0-.154.308-.847.462-1.001l.154-.462.693-1.001c.154-.231.847-1.848 1.001-2.002 0-.231.693-.693.693-.847.154-.385 0-.847.462-1.001.231 0 1.232-.385 1.386-.385l1.001-.308c.308-.154 1.001-.539 1.001-1.001 0-.154-.308-.693-.539-.847l-.462-.847-1.309-2.002-.539-.693c-.308-.693-.308-2.002-1.155-2.541h-.154c-.385 0-.693 0-1.001.231v1.001c0 .154-.385 1.155-.693 1.155l-.693-.154h-.154c-.539 0-.847.847-1.001 1.001-.847.847-2.156 1.848-3.388 2.156l-.847.154-.616.385s-.693.154-.847.154c-.154 0-2.156.308-2.387.308-.308 0-1.463.539-1.617.693-.231 0-.693.462-.693.693-.308-.385-.693-.385-1.001-.385-.693 0-1.155.154-1.694.154-.308 0-.693-.154-.693-.616l.385-.847c.154-.154.462-.847.462-1.001 0-.154.847-1.155.847-1.386.539-.847.539-1.155 1.155-2.002.693-.616 2.002-.154 2.002-1.463 0-.847-1.309-2.695-2.002-3.388-.462-.693-1.463-1.155-1.463-2.31v-.231c.462-1.155 1.463-1.001 2.464-1.001.231 0 1.232-.154 1.386-.154h2.464c.539 0 2.387-.154 2.695-.154l1.54-.308c.308 0 2.156-.385 2.695-.385l2.156-.154.539-.154h4.004l.693-.154h6.16c.154 0 .539-.154.693-.385v-.308c-.693-1.309-1.694-2.156-2.695-3.157l-.308-.385-.539-.616-2.156-2.233h-.385c-.462 0-.77 0-1.155.154l-1.001.847c-.847.539-1.848 1.386-2.849 1.54l-1.463.154-2.695.847c-.231 0-.847.154-1.001.154-.231 0-.693.385-.847.385l-1.848.154c-1.848.154-3.696.308-5.544 1.001h-.154c-.539 0-2.233.154-2.233.154l-.616.154h-1.232l-.462.154h-1.309c-.693 0-1.232.539-1.848.539-.385 0-.539-.154-.539-.539 0-1.001.308-1.848.539-2.695l.154-3.003c.154-.847 1.001-1.001 1.001-1.848 0-1.155-1.386-1.155-2.156-1.463-.231-.154-1.694-.847-1.848-1.001-.539-.385-1.001-.693-1.54-.847-.539-.154-.847-.154-1.309-.385l-2.079-1.001h-.462c-.308 0-1.386 0-1.386.539v.154c1.54.847 3.08 1.694 3.542 3.388 0 .154.539 1.463.539 1.848l.154.77c.308 1.001.847 1.694 1.001 2.695v.847l.154 1.694v.308c0 .154 0 .693-.308.847-4.004.693-8.239 1.001-12.243 1.386h-1.001c-.847 0-1.694.308-2.541.462l-2.002.154-.847.231c-.462 0-1.155-.231-1.694.154-.616 0-3.465.308-4.158.308h-1.155l-.693.154h-2.387l-1.309.385c-.154 0-.847.154-.847.154-1.001.154-2.156.154-3.157.154l-2.849-.154c-.847 0-1.155.308-1.155 1.309s3.619 1.848 4.466 2.002c.385.231.847.539 1.001.693.847.539 1.694.693 2.695.693h.539l1.001-.539c1.001-.308 2.31-.308 3.311-.462.231 0 1.694-.539 1.848-.539h1.232c.77 0 1.617-.308 2.464-.462l5.698-1.232h.154c.693 0 1.386.385 1.54 1.001-.539.847-.693 1.54-1.001 2.387-.308.847-.847 1.54-1.309 2.156-.385.539-.385 1.001-.693 1.54-.539.847-1.155 1.463-1.694 2.156-.154.385-1.001 1.386-1.001 1.386-1.001 1.155-2.156 2.464-3.157 3.696 0 0-.385.308-.539.462-.154.154-1.54 1.309-1.694 1.54l-.308.462s-.308.385-.539.539c-1.155 1.001-2.156 1.848-3.157 3.003l-1.001 1.155c-.693.693-3.157 3.388-3.542 3.696l-1.001.847c-.308.308-3.696 3.542-4.158 3.85-.385.308-.847.539-1.155 1.001 0 .154-.385.847-.539 1.001 0 .385.154.847.539.847.616 0 2.849-2.002 3.465-2.541.154-.154 1.232-1.001 1.54-1.155l.462-.308c.385-.385.693-.847 1.001-1.155l2.541-1.694 1.001-1.001.847-.539c.539-.308.847-1.001 1.309-1.463l1.386-1.001.693-.385c.308-.308.77-1.155 1.463-1.155.385 0 .693.462.693.847 0 .462.154 2.464.154 3.003l.539 1.309v.231c0 .462-.231 1.001-.231 1.617v.693l.231 1.001-.231.847v.308c0 .539.231 1.078.231 1.694 0 1.386-.231 2.541-.385 3.85 0 .385-.154 1.386-.154 1.54v2.31c0 .539-.154 2.387-.154 2.695l-.154.847v2.002c0 .154-.154 1.001-.154 1.232v1.617s-.693 1.232-.847 1.694c0 0-.385.308-.385.539 0 .154-.616.616-.616.847v1.155zm6.16-1.001c0-2.233 0-4.543-.154-6.545 0-.385-.154-1.848-.154-2.002l-.154-.693v-.154l.308-2.541c0-.308-.154-2.31-.154-2.695v-2.002c0-2.156.154-4.158.154-6.237 0-.77-.154-1.463-.154-2.31 0-1.001.154-2.156.308-3.157l.154-.385c.539-.847 1.001-1.309 1.001-2.464v-.385l-1.848-1.848c-.154-.154-.616-.462-.77-.462v-.385c0-.308.154-.616.462-1.001 1.001-1.155 2.695-2.002 3.85-3.003l1.848-1.694.847-.616.308-.539c.693-.847 1.694-1.309 2.541-2.156.308-.385 2.002-2.002 2.387-2.387l.308-.154 1.463-.154v-.308c0-.231 0-.539-.154-.847-.154-.385-1.001-1.848-1.155-2.002 0-.231-.847-.693-.847-.847-.154-.231-.154-.385-.154-.693 0-.539.308-1.001.847-1.155.154 0 1.463-.231 1.694-.231 2.464-.308 4.851-.616 7.315-.77h1.078l.462-.231c.847-.154 2.002-.308 2.849-.308.154 0 .308.154.539.308v.231c-.231 1.617-.385 3.85-.847 5.467l-.385.693c-.308.847-.462 1.694-.847 2.541l-.154.693s-.462.616-.616 1.001l-.539.616-.154.385v.847c-.154 1.001-.847 1.848-1.386 2.618-.154.231-.77 1.848-1.001 2.079l-.616.77c-.693 1.078-1.232 2.233-1.848 3.234l-.693 1.001c-.693 1.155-1.155 2.541-2.002 3.542-1.001 1.155-2.156 2.464-3.157 3.696 0 0-.385.462-.539.616-.154.154-1.309 2.002-1.54 2.233-.154.154-.154.154-.308.154h-.154c-.154-.154-1.386-.847-1.694-.847h-2.31c-1.001.308-2.387 1.001-2.387 2.156v.539l1.155.308c.385 0 3.08.847 3.388.847l1.155.154.693.385s.462.154.693.154l.77.154 2.079.693.77.154c.385.154 1.54.693 1.694.847l.847.616.308.231 1.078.308c.77.308 1.309.847 2.156 1.155l.847.154c.308.231.154.385.154.539 0 1.155-1.155 1.694-2.002 2.31-1.848 1.694-3.696 3.08-5.698 4.389-1.54 1.001-3.388 1.694-5.082 2.541-.77.308-1.463 1.001-2.31 1.309l-2.541 1.155c-.308.231-.847.847-1.309.847h-.154c-.154 0-.539-.308-.539-.462zm20.328-14.476c-.385-.308-1.54-1.463-1.848-1.848 0 0-.539-.154-.693-.308-.539-.154-1.848-.847-1.848-.847l-1.309-.308-.231-.154c-.308-.385-2.002-1.232-2.31-1.386l-.539-.154c-.462-.154-.616-.462-.616-1.001 0-.154 0-.308.154-.539l3.85-3.85c.462-.616 1.155-1.001 1.694-1.617l.308-.539 1.694-2.156c.308-.539.693-2.233 1.463-2.233l.385.231c.693 1.155 1.694 2.31 2.31 3.465l.154.847c.231.693.693 1.54 1.078 2.233l.308.462c.154.693 0 2.156 1.155 2.156.308 0 1.155-.308 1.386-.847l.154-.616c.308-.847 1.309-1.386 1.309-2.387v-.154c-.308-1.001-1.309-1.848-2.002-2.541l-.847-.77c-1.155-1.078-2.156-2.079-3.157-3.234 0 0-.693-.462-.693-.693v-.462c0-.847.539-1.386 1.001-2.156.154-.385.693-2.541 1.54-2.387 0 0 .462.154.616.308 1.001.539 1.848 1.232 3.08 1.232.616 0 1.617-.385 2.31-.539.308 0 1.386-.308 1.386-.308l.462-.385c.154 0 1.001-.308 1.309-.308.231 0 1.232-.154 1.386-.154.847-.154 1.694-.693 2.695-.693.308 0 .462.385.462.693 0 1.001-.616 2.156-1.155 3.003l-.539.539c-.462.616-.77 1.617-1.155 2.31-.616 1.386-1.309 2.387-2.156 3.542l-.154.308c-.385.693-.693 1.001-1.001 1.694l-.693 1.155-1.848 2.387-.154.308-.154.693s-.539.847-.693 1.155c-.308.539-1.001 1.001-1.001 1.694l.693.693c0 .308-.231.616-.539.616-.154 0-.154-.308-.462-.308-.847 0-.847.462-1.386 1.001l-1.309 1.309c-.154.231-1.001 1.386-1.232 1.54-.154.308-.616.693-1.001.693-.462 0-1.155-.154-1.617-.385zm8.547-40.733c.154-.308.616-.462 1.001-.462v.154l-.847.462-.154-.154zm-2.387 8.239c0-.154.154-.154.385-.154 0 .154 0 .462-.231.462l-.154-.154v-.154zm-4.004 34.727l.154-.154h.154l.154.154-.154.154h-.154l-.154-.154z\"/>'\n                +                     '<path id=\"comma\" d=\"M160.88 209.66c0 2.464 1.848 4.466 4.235 4.62-1.078 4.004-4.466 6.16-5.39 6.776l.77 1.309c2.233-.77 9.394-4.851 9.625-12.32v-.385c0-2.541-2.079-4.62-4.62-4.62s-4.62 2.079-4.62 4.62z\"/>'\n                +                 '</g>'\n                +                 '<g>'\n                +                    '<path id=\"po\" d=\"M17.093 75.931l.154.154h.539c1.001 0 1.309-.462 2.156-1.001l.847-.308c.154-.154 1.001-.539 1.001-.539.308-.154 1.001-1.001 1.155-1.309.385-.308 1.232-1.155 1.386-1.386l.693-.308.77-.847 1.694-1.309.154-.154 5.082-6.93c.154-.154.616-1.155.847-1.309l.462-1.001.539-.693c.462-1.001.847-2.156 1.155-3.311l.154-.385.308-.462 1.386-2.695s.154-.385.154-.539c0-.308.693-2.31.693-2.695.462-2.002 1.001-4.004 1.309-6.16v-.693l.847-3.003c0-.154.154-2.156.154-2.387l.154-.77c0-.693.693-5.929.693-6.545.154-.847.539-1.386.308-2.387.231-.154 1.232-.693 1.386-.693.308-.154 2.541-.616 3.003-.616h1.155c.847-.231 1.848-.539 2.695-.847.308-.154 1.386-.385 1.386-.385l.462.539.154 2.002.154.539v1.617c0 1.386.385 2.541.385 4.081l-.154.308v3.388l-.231.154s-1.463.308-2.002.462h-.616c-.231 0-1.386.539-1.54.539h-.154c-1.386.154-4.697.693-4.697.693l-.847.308c0 .308 3.003 2.156 3.696 2.31.462-.154 3.003-.462 3.542-.616l.462-.231c.308-.154 1.386-.308 1.386-.308h1.155l3.003-.847 1.155-.154c1.155-.308 2.387-.847 3.542-.847.693 0 1.309.693 1.309 1.155 0 .693-.308 1.54-.616 2.079l-.231.308c-.308 1.001-.308 1.694-.77 2.541-.231.154-1.001 1.309-1.001 1.463l-.385 1.155-.154.385-.308.462c0 .231-.539 1.54-.693 1.694 0 .154-.847 1.155-1.001 1.386-1.001 1.617-1.155 2.618-2.387 4.158-.308.308-.462.693-.847.693-.462 0-.616-.385-1.001-.693-.308-.154-1.155-1.155-1.309-1.309-.154-.385-2.002-2.387-2.156-2.695-.385-.539-1.232-.847-1.694-1.386l-.693-.847-1.155-1.309h-.308c-.539 0-.693.308-1.232.539l-1.001.308-.308.462c-.308.539-1.309.539-1.309 1.232 0 .308.154.308.462.462.154 0 1.309.539 1.54.539 1.001.462 1.848 1.309 2.464 2.156l.231.154c.616.539 1.155.385 1.617 1.001.693.847 1.386 1.232 2.233 2.002.154.231 1.463 1.232 1.617 1.386.385.154.539.693.539 1.155l-2.849 2.849c-.154 0-.847.539-1.001.693-.154.154-.693.847-.693 1.001 0 .154-.462.462-.693.693l-.462.308-1.386 1.155-3.003 2.002c-.154.231-.847 1.001-1.001 1.001-.154.231-1.463.693-1.694.847-.154.231-1.463.847-1.617 1.001l-.385.231c-.462.154-.616.154-1.155.462-.847.539-1.54 1.386-2.31 1.694l-.693.154-.539.308c-1.463.539-3.465.539-4.697 2.079h.231c1.771 0 3.311-.693 5.005-1.386l1.001-.308 1.001-.154 1.309-.693c.231 0 .847-.308 1.001-.308l1.078-.539c2.156-1.001 4.466-1.848 6.468-3.157l4.389-3.08c1.001-1.155 2.387-2.31 3.542-3.311.308-.385 1.155-1.001 1.155-1.001h.539c2.002 0 2.464 2.002 3.465 3.311 1.848 2.387 3.85 4.697 5.852 6.93.231.308.847 1.463 1.078 1.848.154.308.154.77.616.77h.693c1.54 0 3.157-.308 4.543-.616.616-.154 2.156-.693 2.31-.693.539-.154 2.849-.462 3.388-.462.154 0 .154-.231.154-.385 0-.847-1.54-.847-2.002-.847-.154 0-1.155-.308-1.386-.308l-.77-.154c-1.54-.539-2.695-1.155-4.081-1.848-.616-.385-1.309-.539-2.002-1.001-.308-.385-1.694-1.386-1.848-1.54l-1.463-1.001-.231-.154-.462-.693c-.154-.308-2.387-2.156-2.541-2.541l-.308-.462c-.154-.154-.539-.693-.539-.693-.308-.462-.308-.308-.847-.616-.77-.539-1.309-1.078-1.771-1.848l-.231-.385.231-.308c.154-.385 1.309-1.54 1.463-1.848.308-1.386.693-2.541 1.54-3.696l.462-.693.385-.616.77-1.078c.231-.154 1.078-2.156 1.232-2.31l1.463-1.694s.385-.308.385-.462c.462-.847.462-1.848 1.001-2.695l.847-1.155c.308-.385.462-1.386 1.001-1.54.847-.308 2.156-.308 2.849-.308 0-.539-.385-1.232-.539-1.54-.154-.539-.847-.539-1.155-1.001l-.154-.539c0-.154-.385-.462-.385-.462l-1.463-1.54-1.54-2.002c-.154-.154-.154-.154-.462-.154-1.232 0-1.54 1.155-2.541 1.54l-.847.154-.462.308c-.385.154-1.232.693-1.232.693l-.616.154c-.231 0-.539.154-.539.154l-1.309.693h-.385c-.308 0-.616 0-.616-.308v-.231c0-.462.154-1.848.154-2.002l.154-.847-.154-1.309v-2.849l.154-3.542c0-.154.308-.847.539-1.001 0 0 1.001-.539 1.309-.693.154 0 .462-.154.462-.154h.693l.847-.154h2.695c1.001-.693 2.156-.847 3.311-1.001h.385c.616 0 1.309.693 1.309 1.309 0 1.386-.308 2.387-.847 3.542-.308.847-.616.847-.616 2.002 1.309 0 1.848-1.463 2.464-2.464 0-.231.693-.693.693-.847l.308-.539.693-.462c.154-.231 1.694-1.54 2.002-1.848.154-.231.847-.847 1.001-1.001.539-.539 1.54-.539 1.848-1.386v-.308c0-.385.154-.539-.154-.693l-1.001-.693-.847-1.001-2.31-2.31c-.231-.154-.693-.847-.847-1.001-.154-.154-.539-.154-.693-.154-.847 0-2.156 2.464-2.849 3.003-.154.154-1.54 1.001-1.848 1.309-.693.539-1.694.539-2.31.693l-.693.308-1.155.154c-.539.231-.847.539-1.386.693h-.693l-.616.154h-.539c-1.309 0-1.309-1.617-1.309-2.464v-1.232c0-.154.154-1.617.154-1.848 0-.77-.154-1.309.154-2.002v-4.312l.539-.539c.462-.462.847-.308.847-1.001 0-1.54-2.695-2.695-3.696-3.388l-1.232-.616c-.77-.693-1.463-1.694-2.618-1.694v.847l.154.308.462 1.155s.154 1.078.154 1.386v.462l.539.693.154.308c0 .231.385.693.385.847v2.541s.154.539.154.693l.154.462v1.54c0 .154.308 1.309.308 1.54v.308l-.154 1.694c0 1.155 0 2.695.154 3.85l.154.462-.154.154-1.155.231-1.54.462-1.617.693c-.231 0-1.848.308-2.002.308-.231 0-.847.539-.847.539-.385 0-2.079.308-2.387.308l-.693.308h-.154c-.308 0-.462-.154-.462-.462l-.154-1.001c0-.154-.539-1.001-.693-1.386 0-.154-.693-.77-.693-1.001-.308-.462-.462-1.463-1.309-1.463-.154 0-.385 0-.385.154v1.54l.231 1.463v1.386c0 .154.154.77.154 1.001l-.154.308c0 .154-.231.847-.231.847v4.389c0 1.463-1.309 1.155-1.309 2.002 0 .462.462.616.462 1.155 0 .462.231 2.156.231 2.31 0 .231-.231 1.386-.385 1.694l-.308.847v1.155c0 .693-.154 3.08-.154 3.388-.154 1.155-.693 2.31-.847 3.542l-.154 1.309-.385 1.001c0 .154-.154.693-.154.693v.847c0 .154-.154.847-.308 1.001l-.385.693c-.154.462-.77 2.464-1.001 3.003 0 .154-.154.616-.154.847-.308.462-1.463 3.157-1.694 3.696-.308.77-.462 1.617-1.001 2.31l-1.155 1.155s-.308.847-.462 1.001l-.231.539c-.308.847-.616 1.309-1.155 2.002-2.156 2.849-4.543 5.544-7.392 7.7-1.001.847-1.848 2.002-3.003 2.695zm-5.544-15.785c0 1.232.539 2.233 1.232 3.08l.616.616.693 1.386.308.462.231.385.154.462c.154.308.308.308.462.308.539 0 1.155-1.155 1.155-1.463 0-.539-.616-.693-.616-1.155v-2.079l-.154-2.618c0-.231-.231-.847-.231-1.001v-.539c0-1.309.847-1.001 1.848-1.155.231 0 .847-.154.847-.154l1.155-.231.539-.308c1.309-.308 2.541-.308 3.85-.693.154 0 .693-.154.693-.154l1.155-.154 1.309-.693h1.232l1.001-.462 1.155-.154s.308-.231.308-.385c0-1.694-3.003-1.694-3.003-2.849v-.154l.154-.693.231-1.309.154-.693c.308-2.31.616-4.697 1.001-7.007 0-.385.616-3.234 1.155-3.388.539-.154 2.156-.154 2.156-.847v-.154c0-.154-.154-.462-.154-.462l-1.463-.847-3.234-3.234c-.847 0-.847.847-1.155 1.386l-1.001 1.155-.308.462-.231.231c-.847.154-2.156.308-3.003.847l-.308.308h-.539c-.154 0-.616.308-.847.308l-.847.154-.462.539c-.693.308-1.694.308-2.387.462-.154 0-.77.385-1.001.385h-.308l-.847-.847v-.154c0-.693.539-1.001.847-1.54l.847-1.463.462-.539c.231-.154.693-1.001.847-1.155.231-.154 1.694-1.694 1.848-1.848l.385-.693 1.155-1.155c.308-.385.462-1.386.847-1.848.616-1.001 1.309-1.694 2.002-2.695.308-.539.693-2.541 1.54-2.541h1.617c.154 0 .154-.308.154-.462v-.154c-.154-.385-.616-1.54-.77-1.694l-.539-.847c0-.154-.154-.308-.154-.308s.154-.385.308-.385l.693-.462 2.002-.154 1.155-.385c.154 0 2.002-.154 2.541-.154h2.541l.308-.154v-.693c-1.001-1.155-2.002-2.002-3.157-3.003-.539-.308-1.386-1.54-2.233-1.54-.616 0-.616 1.386-1.309 1.694l-.693.308c-.154.231-1.309 1.078-1.463 1.078h-1.848l-.693.154h-.847c-.847.154-2.002.847-2.695 1.001-1.463.308-3.542.616-5.005.847l-2.156.154c-.231 0-1.386.308-1.54.462-.847.231-4.543.539-5.39.539h-2.695c-.154 0-.154.154-.154.308 0 .847 1.232 1.232 1.848 1.54.385.154 1.155.693 1.386.693.616.462 1.309 1.309 2.156 1.309 1.001 0 2.002-.539 3.003-.693h.693l2.31-.616c1.848-.539 3.542-1.001 5.39-1.386h.154c.539 0 .693.693.693 1.155 0 .847-1.155 2.849-1.694 3.696l-1.309 2.695c-.539.385-.847 1.54-1.232 2.002-.308.693-.308 1.232-.77 1.848-.231.154-1.386 1.694-1.54 1.848l-.308.847-.693.693c-.154.308-.308 1.001-.847 1.001-.308 0-.462-.154-.693-.308l-1.155-1.386h-.154c0 1.386.693 2.541.693 3.696 0 .693-.847 1.694-1.386 2.387-.847 1.001-1.463 2.002-2.156 3.157l-.693 1.309-1.155 1.54-.154.462c-.539.693-1.386 1.078-1.848 1.694-.154.154-.693.847-.693.847 0 .154-.308 1.386-.308 1.848v.308s.462 2.233 1.001 2.079c.154 0 .308-.385.308-.385v-2.156s.385-.539.539-.693l2.156-2.464.539-.693c.308-.539 1.001-.847 1.463-1.386.539-.462 1.848-2.618 2.387-2.618h.154c.693.462.693 1.001.693 1.617.154 1.848.462 3.542.462 5.39l-.154 3.696c0 1.155.154 2.31.154 3.542v1.848c-.154.847-.693 1.617-.693 2.464zm2.695-18.403v-.385c.385-.462 1.155-.847 1.694-1.001l1.309-.308h1.386l.616-.308 2.079-.539c.308-.154 2.618-.847 3.157-1.001l.847-.308h.154c.154.154.539.462.539.462v.693l-.231 1.463v1.54l-.308 1.001v1.155c0 .231-.154.693-.154.847l-.154 1.694-.154.847c0 .539-.385 3.388-.693 3.542-.847.462-1.54.462-2.387.847-.154 0-.847.308-.847.308-.154 0-.462.154-.462.154l-1.001.154c-.539.231-1.694.847-2.156.847-.231 0-1.078-.154-1.232-.154-.308 0-.616-.308-.616-.693 0-.154-.385-1.617-.385-2.156-.308-2.156-.616-4.158-.847-6.391v-1.848l-.154-.462zm-5.544-11.627c0 .385.154.847.539 1.078v-.385c0-.308-.154-.693-.539-.693zm41.965 31.724h.154c0 .154 0 .308-.154.308v-.308zm17.248-41.272c.154 0 .154.154 0 .154s-.154-.154 0-.154z\"/>'\n                +                    '<path id=\"xiao\" d=\"M28.566 136.365c0 .539 1.694 1.232 2.233 1.54.154 0 .616.693.847.693.154 0 .77.308 1.001.462h.154c.154 0 .616-.462 1.001-.616.154-.231 1.694-.693 1.848-.847l.308-.154.693-.539 1.309-.693c1.386-.616 3.003-1.309 4.235-2.156l.616-.693c.693-.462 1.694-.616 2.387-1.155.847-.539.847-.847 1.694-1.155l1.309-.539.539-.308c.154 0 .77-.385 1.001-.385.154-.154.847-.77 1.001-1.001h-.539c-.462 0-.693 0-1.001.231l-.847.77-1.309.231c-.693.154-1.54.462-2.156.616-.231 0-1.078.231-1.232.231-.462.154-.847.616-1.463.616h-.154s-.539-.462-.693-.616l-.385-2.387v-3.157c0-.154.385-.539.539-.693l2.002-.154.539-.154c1.001-.231 3.311-.385 4.004-1.232v-.154c0-.154-.154-.462-.154-.462l-2.233-2.233h-.154c-.847 0-1.694.847-2.31 1.232l-1.155.462-.385.154h-.154l-.539-.616c0-1.54-.308-3.08-.308-4.389 0-.847.308-.847 1.001-1.001 2.156-.693 4.543-1.54 6.699-1.694l2.002-.154c.539 0 1.848-.154 2.233-.308l.462-.385 1.001-.154.539-.154.308.154.539.308.462.231c.693.308.693 1.309.847 2.002l.308 1.155v2.156l.231.693v1.155c-.539 1.001-3.542.847-4.543 1.155l-1.001.385c-.154 0-1.155.154-1.386.154l-1.463.308-.385.231v.154c.539.847 1.848 2.31 2.849 2.31 2.079 0 3.696-1.155 5.698-1.155.385 0 .539.308.539.539l.154 1.463v4.235c-.308.462-1.309 1.001-1.848 1.155h-2.695l-2.618.847-1.078.154-1.309.308c0 .539.154.539.539.693.77.308 1.848.693 2.618 1.155l.693.539h.847l.847-.385c.462-.154 1.309-.308 2.002-.308.693 0 .693.308 1.54.308h.462c.539-.308.385-1.001 1.001-1.155h2.695l1.155-.308h1.386c.154 0 .616-.385.847-.385l2.002-.154c2.156-.154 4.312-.847 6.699-.616.154 0 .154-.231.154-.385v-.154c-.308-2.002-1.001-1.155-2.002-2.387l-1.001-1.309h-.385c-.616 0-1.155.308-1.771.539-.693.154-1.54.308-2.233.616l-.616.385h-1.078s-.308.154-.462.154c-.693.308-1.155.693-1.848.693-1.001 0-1.155-1.54-1.309-2.233l-.231-.462v-1.694l-.308-1.155v-.154l.539-.693.154-1.001c0-.154.308-.154.462-.154.539 0 .693.308 1.155.308.539 0 1.078-.308 1.54-.308l1.155-.231c.231 0 1.232-.308 1.386-.308.462 0 3.311-.154 3.85-.154l.462-.154c.231 0 1.54-.231 1.694-.231l.693-.154 1.155-.154.154-.154v-.154c-.154-.385-.462-1.001-.462-1.001l-2.695-2.695s-.308-.154-.539-.154c-.847 0-.847.462-1.463.847-1.155.462-2.695.616-3.85 1.155-.154 0-.539.154-.539.154-.847.154-1.463 0-2.156.308l-.847.539h-.154c-.385 0-.539-.154-.847-.308-.308-.231-.154-.385-.308-.693-.231-.385-.693-.154-.693-.693 0-.847 0-1.54.308-2.156l.539-.847v-.154c-.385-.154-1.54-1.386-1.694-1.694-.308-.308-.308-.308-.308-.693 0-.308.154-.308.462-.462l1.001-.385.693-.308.847-.154 1.155-.385h1.694l1.155-.308h.693c.847 0 1.463.154 2.156.154 0-1.001-.847-1.309-1.54-1.848-1.001-.616-1.771-2.156-3.157-2.156-.462 0-1.309.539-1.848.693-.847.154-1.463.154-2.31.616l-.539.385-1.155.154-1.001.308c-1.694.385-3.234.539-4.697 1.001h-.154l-.385-.308c.231-1.694-.308-3.157-.616-4.851v-.154c0-.693 1.309-.847 1.617-.847.231 0 1.386-.154 1.54-.154l.308-.231c.231-.154 1.001-.308 1.001-.308.231 0 1.694-.154 1.848-.154.385 0 2.387-.693 2.541-.693.154 0 1.54-.308 1.848-.308.847-.154 3.388-.539 3.696-.539h1.848l2.156-.308s.308-.308.539-.308c.154 0 1.309-.385 1.617-.385v-.462c-1.463-1.386-2.464-3.08-4.312-3.85-1.001 0-2.156 1.001-3.234 1.309-.154 0-.77.308-1.001.308-.154 0-.616.847-.847.847l-1.309.154-.308.231h-1.54l-3.311 1.155-1.232.154-.616.308s-1.386.231-1.848.231h-.154c-.385 0-.539-.385-.539-.693l-.154-2.387v-3.003c.154-.847 1.309-1.155 1.309-2.156 0-.154-.154-.539-.154-.539-.154-.308-1.309-1.463-1.694-1.617 0 0-.616-.385-1.001-.539l-1.463-.693c-.539-.154-1.232-.616-1.694-.616h-.847c-.308 0-1.54 0-1.54.462 0 .308 1.232 1.001 1.54 1.155.308.385.308.539.693.847l.462.693v1.54s.154.308.154.462c0 0 .385.693.385.847 0 .308.154 2.31.154 2.695 0 .693.308 1.309.462 2.002 0 .693-.154.693.231 1.309l.308.385v.154c-.308.462-.693.847-1.155.847l-3.234.308-2.464.847c-.385 0-2.849.308-3.542.308h-.539l-.462.231c-.539 0-2.541.308-3.003.308h-1.386c-.616 0-.462.693-1.617.847-.231 0-2.079.154-2.233.154-.308 0-.847.308-.847.847 0 .308 1.848 1.001 2.233 1.155l1.309.693c.539.154 1.54.154 2.156.154h.693c.308 0 2.156-.847 2.541-.847l3.157-.462.693-.231c.462-.154 1.001-.462 1.463-.462h1.232l1.001-.308h1.155l1.848-.385c.154 0 .154 0 .308.154.539.693.154 1.54.385 2.233 0 .154.154.847.154.847v.308c0 .154-.154 1.001-.154 1.001-.231.539-1.386.539-1.694.693l-.539.154-2.156.308c-1.155.154-2.156.693-3.388.847h-.77c-.231 0-.693.308-.847.308-.231 0-1.386.231-1.54.231l-1.155.462h-3.003c-.231 0-.539.385-.539.385v.308l.308.462.231.693c.154.539 1.001.154 1.309.385 0 0 .847.462 1.155.616.385.154.847.539 1.001.847.385.539.231 1.001.231 1.54l.308 1.848v1.155s.154.308.154.462l.154.385v.154l-.154.154c-.693.385-1.155.154-2.002.385l-1.155.308-2.387.154c-.154 0-.616.154-.847.154l-.462.385c-.385.154-1.848.462-2.233.462-.154 0-.154.385-.154.385 0 .616.847.616 1.386 1.001.308.154.462.77.847 1.001 0 0 .847.154 1.001.154h.308c.539 0 1.001-.154 1.54-.385l1.309-.308 1.001-.462h1.54c.462.308 1.001 1.463 1.001 2.156v1.001l.154.462v.385s-.154.693-.154.847c0 .847.154 1.463-.847 1.848-.154 0-2.156.462-2.387.462 0 0-.616.154-.77.385-.231 0-1.386.616-1.54.616-.308.154-3.157 1.001-3.542 1.232-.462.154-.847.308-.847.77zm-8.547 10.395c0 1.078.847 1.694 1.232 2.387l.308.693.847 1.001.308.847c.154.154.693 1.309.847 1.309h.154l.385-.154c.154-.154 1.155-1.155 1.309-1.386v-.308c0-.154 0-.308-.154-.693.154-3.311-.154-6.314-.385-9.702v-1.694c0-.154-.154-1.155-.154-1.463l-.154-1.001.154-1.232v-5.313c.154-.385.154-.539.154-.847v-.385c0-.154-.154-.77-.154-1.001v-8.008c-.154-.539-.154-1.001-.154-1.694 0-.539 0-1.001.154-1.54v-5.852c-.154-.308-.154-.462-.154-.847l1.001-4.004c0-.693-.154-.847-.462-1.309 0-.231-.539-1.001-.693-1.232-.539-.462-1.386-1.155-2.002-1.155-1.155 0-1.54 1.001-2.002 1.848-.385.539-.539.847-1.001 1.155-.847.847-2.233 1.386-3.388 1.694l-.847.154-.462.385c-1.001.462-2.079.847-3.234.847-.847-.693-.847-2.233-1.309-3.08-.385-.616-1.001-1.309-1.386-2.156l-.462-1.155c-.154-.385-.308-.154-.539-.154-.616 0-.847.308-.847.77 0 .693.693 1.848 1.078 2.695l.308.693s.154 1.155.154 1.694v.308l.308.847c0 .154.231 1.001.231 1.309v1.232l.154.462v2.387l.154.462c0 .154.154.693.154.693.154 1.694.308 3.388.539 5.005v.231c0 .616-.231 1.309-.231 1.771v1.078c0 .154.231.77.231 1.001.154 1.463.154 3.157.154 4.697v.77l-.154 3.927c-.231.616-1.386.616-1.386 1.309s.539 1.155.693 1.848c.154.308.462 1.848.462 2.156v.154c0 .385 0 1.386-.308 1.54-.693 0-1.155 0-1.848.154l-.693.385-2.156.154-.693.154-2.464.308-.154.231v1.309s.77 1.001 1.155 1.309c.308.385.847.231 1.155.385.847.462 1.54.616 2.387 1.155l.616.462c1.694 0 2.387-1.463 3.696-2.156l.847-.308.693-.693.462-.154 1.54-.847.847-.154.308-.154c.308-.385.154-.539.693-.847 1.155-.693 2.464-1.155 3.696-1.848.462-.385.616-.693 1.155-.847h.154c.154 0 .539.462.539.693v2.156l.154 1.001v.308l-.154 1.232c0 .154-.154.847-.154.847-.385.616-1.232.77-1.232 1.771zm4.543 17.171c.154.154.539.154.693.154h.462l.539-.154c.308-.231 1.848-.539 2.156-.539 1.001-.154 2.002-.308 3.003-.693 1.694-.616 3.234-1.309 4.851-2.002l.385-.154.847-.847 1.001-.616s.462-.385.462-.539l.385-.539 2.002-2.002.154-.308.154-.539.693-.616s.154-.385.154-.539l.154-.693c.154-.154 1.001-1.848 1.001-2.002l.154-1.463c0-.154.385-1.232.539-1.54l.154-.308.154-1.001c.231-.847 1.54-1.232 2.233-1.386l1.463-.154c.385 0 2.387-.693 2.695-.693h1.155c.231 0 .847-.308 1.001-.308h.385c.308 0 .616.308.616.693l.231 1.617.154.539v.308l-.154 2.079c0 .462.154 1.309-.231 1.771v6.237s.231.693.385 1.001c.154.539.847 2.002.847 2.002.154.385 1.155 1.386 1.463 1.54l.539.154.693.308c1.001.385 2.31.693 3.465.693h.385l5.467-.462h2.233c.154 0 .847-.231.847-.231.462 0 3.157-.462 3.696-.462l2.31-1.155c.693-.385 1.001-2.233 1.001-2.695 0-.693 0-1.386-.154-1.848 0-.154-.693-1.155-.693-1.386 0-.154-.154-.77-.154-1.001l-.154-.616c-.539-3.08-.539-6.391-.847-9.394l-.154-.385h-.154c-.231 0-.385.385-.385.385v3.157l-.462.539c0 .616-.385 3.465-.385 4.158l-.308 1.694v.154l.154.539c0 .308-.462.77-.693 1.155l-.154 1.001c-.154.308-1.309 1.463-1.617 1.694-.231 0-1.386.462-1.694.616-1.54.539-3.234.847-4.851.847h-1.848c-.231 0-.693.154-.847.154h-2.695c-.693-.154-1.155-1.155-1.309-1.617-.231-.385-.539-1.386-.539-1.54v-7.007c.539-1.694.539-3.388.847-5.082 0 0 .154-.693.308-.847l.693-.462.154-.154.308-.539s.693-.462.693-.693v-.616c0-.231-.847-.847-.847-1.001l-.308-.539-.539-.308c-.308-.231-1.463-1.386-1.617-1.694h-.231c-.616 0-.462.462-.77.847-.231.154-1.386 1.309-1.694 1.694-.385.308-.847.462-1.155.616-.231 0-1.386.847-1.54.847h-1.848c-.539.154-.693.539-1.155.693-.539 0-2.541.154-3.003.154h-.693c-.693 0-1.386-.847-1.694-1.54l-.847-1.617c-.154-.385-.462-1.232-1.001-1.232-.154 0-.462 0-.462.231v.616c0 .539 0 1.001.308 1.386v2.31c0 .154.154.847.154.847l-.462 1.54c0 .462.154 1.001.154 1.309 0 1.386-.154 2.849-.693 4.004 0 .231-.462.847-.462 1.001-.385.693-.231 1.54-.693 2.233-.154.154-1.386 1.463-1.54 1.694l-.154.308-.308 1.001c-.539.847-1.694 1.001-2.387 1.694l-.616.693c-.385.154-1.232 1.001-1.386 1.001l-1.001.308-.308.154c-.847.539-1.001 1.155-2.002 1.386l-1.078.154c-.154 0-1.309.308-1.463.462l-.539.385-.308.154-1.309.308c-.231 0-.539.308-.539.539zm-8.855-39.116l3.003-1.001 1.463-.154c.385-.154.385-.308.385-.539 0-.462-2.387-2.31-3.003-2.31-.693 0-2.233.462-2.695.847-.693.462-.847.847-1.694.847-.308 0-.539-.231-.693-.539v-3.696s-.154-1.001-.308-1.309l-.154-.539.154-.616c0-.231.154-1.078.154-1.078v-3.003c.308-.462 1.155-.616 1.54-.847.462-.154 1.309-.616 1.848-.847l1.155-.154 2.849-.616.462-.231h.385c.154 0 .693.231.693.385v7.007l.154.539c0 .308.154 1.309.154 1.463v2.849c0 .231.154.847.154.847v.154c0 .231 0 .385-.154.539v2.849c0 2.695 0 5.236.154 7.7l.154 1.848v1.54l-.308.308-1.155.154c-.693.231-1.386.693-1.848.847-.231 0-1.232.385-1.386.385-1.001.308-1.848.77-2.849.77-.616 0-1.155-1.309-1.155-2.002v-11.55c0-.847 2.002-.847 2.541-.847zm24.255-10.703c0-.154.231-.385.385-.385s.308 0 .308.231v.154c0 .154-.308.462-.308.462-.385 0-.385-.308-.385-.462zm-24.101 8.162c0-.154.154-.154.308-.154.385 0 .847 0 .847.385h-1.001l-.154-.231zm59.521 19.635c-.154-.154-.154 1.001 0 .847.154-.154.154-.616 0-.847zm-33.726-27.797l.154-.154.231.308-.231.154-.154-.154v-.154zm-17.402 49.588c-.154 0-.154.385 0 .385s.154-.385 0-.385zm23.793-59.521c.154 0 .308.154.308.385-.154 0-.308-.231-.308-.385zm14.245-3.003h.154v.308h-.154v-.308zm-40.733 7.392h.308v.154c-.154 0-.308 0-.308-.154zm2.31 54.978v.154h.231v-.154h-.231zm32.571-60.83l.154-.231v.385l-.154-.154z\"/>'\n                +                    '<path id=\"period\" d=\"M31.8 212.74c0 4.312 3.388 7.7 7.7 7.7s7.7-3.388 7.7-7.7-3.388-7.7-7.7-7.7-7.7 3.388-7.7 7.7zm2.31 0c0-3.003 2.387-5.39 5.39-5.39 3.003 0 5.39 2.387 5.39 5.39 0 3.003-2.387 5.39-5.39 5.39-3.003 0-5.39-2.387-5.39-5.39z\"/>'\n                +                 '</g>'\n                +             '</g>'\n                +         '</svg>'\n                +     '</div>'\n                + '</div>',\n        controller: ['$scope', function ($scope){\n\n            $scope.replay = function (){\n\n                var logo_group = angular.element(document.getElementById('logo_group'))\n                    vivus_logo = new Vivus('vivus_logo', {\n                        type: 'oneByOne', \n                        duration: 500, \n                        pathTimingFunction: Vivus.EASE_IN}, function (){\n                            logo_group.css({\n                                stroke: 'inherit',\n                                fill  : '#000'\n                            })\n                        });\n                logo_group.css({\n                    stroke: '#000',\n                    fill  : 'none'\n                })\n                vivus_logo.reset().play()\n            }\n        }],\n        link: function (scope, elem, attr){\n            new Vivus('vivus_logo', {type: 'delayed', duration: 77, pathTimingFunction: Vivus.EASE_IN}, function (){\n                var logo_group = angular.element(document.getElementById('logo_group'))\n                logo_group.css({\n                    stroke: 'inherit',\n                    fill  : '#000'\n                })\n                elem.next().css({\n                    webkitTransition: 'all .7s ease-in-out',\n                    transition      : 'all .7s ease-in-out'\n                })\n                scope.$apply(function (){\n                    scope.isLogoLoaded = true\n                })\n                $timeout(function (){\n                    elem.next().css({\n                        webkitTransition: 'inherit',\n                        transition      : 'inherit'\n                    })\n                }, 700)\n            })\n        }\n    }\n}])","angular.module('ShinyaApp.notifyDirective', [])\n.directive('syNotify', function (){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            scope.$watch('isMsgNotify', function (newVal){\n                elem.removeClass('submit_animate')\n                elem.attr('type', 'button')\n                if (newVal){\n                    // elem.removeAttr('type')\n                    if (scope.errMsg){\n                        elem.addClass('error_msg')\n                        elem.attr('value', scope.errMsg)\n                    } else if (scope.okMsg){\n                        elem.addClass('ok_msg')\n                        elem.attr('value', scope.okMsg)\n                    } else {\n                        console.error('[TypeError]: Not `error` or `ok`')\n                    }\n                } else {\n                    elem.removeClass('error_msg ok_msg').addClass('submit_animate')\n                    elem.attr({\n                        'type' : 'submit',\n                        'value': attr.value || '提交'\n                    })\n                }\n            })\n        }\n    }\n})","angular.module('ShinyaApp.usercountDirective', [])\n.directive('syUsercount', function (){\n    return {\n        restrict: 'E',\n        template: '<div ng-if=\"!isMobile\" id=\"userCount\" class=\"faster_animate\" ng-click=\"toggleAtUserBox()\">'\n                +   '在線人數：{{userCount}}'\n                + '</div>',\n        controller: ['$scope', '$timeout', function ($scope, $timeout){\n            \n            // 在線人數\n            $scope.userCount  = 0\n            $scope.onlineUser = []\n            function userCountNotify(elem, type){\n                elem.classList.add(type)\n                $timeout(function (){\n                    elem.classList.remove(type)\n                }, 717)\n            }\n            // 有用戶加入／退出\n            $scope.onUserIO = function(msg){\n                var elem = document.getElementById('userCount')\n                // 提醒\n                elem\n                ? $scope.userCount <= msg.count // 桌面端\n                    ? userCountNotify(elem, 'user_join')\n                    : userCountNotify(elem, 'user_left')\n                : null  // 移動端\n                // 更新\n                $scope.$apply(function (){\n                    $scope.userCount  = msg.count\n                    $scope.onlineUser = msg.onlineUser\n                })\n            }\n        }]\n    }\n})","angular.module('ShinyaApp.geoHelperServices', [])\n.service('syGeoHelper', function(){\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n//:::                                                                         :::\n//:::  This routine calculates the distance between two points (given the     :::\n//:::  latitude/longitude of those points). It is being used to calculate     :::\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\n//:::                                                                         :::\n//:::  Definitions:                                                           :::\n//:::    South latitudes are negative, east longitudes are positive           :::\n//:::                                                                         :::\n//:::  Passed to function:                                                    :::\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\n//:::    unit = the unit you desire for results                               :::\n//:::           where: 'M' is statute miles (default)                         :::\n//:::                  'K' is kilometers                                      :::\n//:::                  'N' is nautical miles                                  :::\n//:::                                                                         :::\n//:::  Worldwide cities and other features databases with latitude longitude  :::\n//:::  are available at http://www.geodatasource.com                          :::\n//:::                                                                         :::\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\n//:::                                                                         :::\n//:::  Official Web site: http://www.geodatasource.com                        :::\n//:::                                                                         :::\n//:::               GeoDataSource.com (C) All Rights Reserved 2015            :::\n//:::                                                                         :::\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n\n    function distanceHelper(lat1, lon1, lat2, lon2, unit) {\n        var radlat1 = Math.PI * lat1/180\n        var radlat2 = Math.PI * lat2/180\n        var radlon1 = Math.PI * lon1/180\n        var radlon2 = Math.PI * lon2/180\n        var theta = lon1-lon2\n        var radtheta = Math.PI * theta/180\n        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n        dist = Math.acos(dist)\n        dist = dist * 180/Math.PI\n        dist = dist * 60 * 1.1515\n        if (unit==\"K\") { dist = dist * 1.609344 }\n        if (unit==\"N\") { dist = dist * 0.8684 }\n        return dist\n    }\n    var weather_condition_codes = {\n        // http://openweathermap.org/weather-conditions\n        // Thunderstorm 200 ~ 232\n        '200': {'type': 'lightning', 'icon': 'lightning'},\n        '201': {'type': 'lightning', 'icon': 'lightning'},\n        '202': {'type': 'lightning', 'icon': 'lightning'},\n        '210': {'type': 'lightning', 'icon': 'lightning'},\n        '211': {'type': 'lightning', 'icon': 'lightning'},\n        '212': {'type': 'lightning', 'icon': 'lightning'},\n        '221': {'type': 'lightning', 'icon': 'lightning'},\n        '230': {'type': 'lightning', 'icon': 'lightning'},\n        '231': {'type': 'lightning', 'icon': 'lightning'},\n        '232': {'type': 'lightning', 'icon': 'lightning'},\n        // Drizzle 300 ~ 321\n        '300': {'type': 'rain', 'icon': 'drizzle'},\n        '301': {'type': 'rain', 'icon': 'drizzle'},\n        '302': {'type': 'rain', 'icon': 'drizzle'},\n        '310': {'type': 'rain', 'icon': 'drizzle'},\n        '311': {'type': 'rain', 'icon': 'drizzle'},\n        '313': {'type': 'rain', 'icon': 'showers'},\n        '314': {'type': 'rain', 'icon': 'showers'},\n        '321': {'type': 'rain', 'icon': 'showers'},\n        // Rain 500 ~ 531\n        '500': {'type': 'rain', 'icon': 'rain'},\n        '501': {'type': 'rain', 'icon': 'rain'},\n        '502': {'type': 'rain', 'icon': 'downpour'},\n        '503': {'type': 'rain', 'icon': 'downpour'},\n        '504': {'type': 'rain', 'icon': 'downpour'},\n        '511': {'type': 'rain', 'icon': 'flurries'},\n        '520': {'type': 'rain', 'icon': 'showers'},\n        '521': {'type': 'rain', 'icon': 'showers'},\n        '522': {'type': 'rain', 'icon': 'showers'},\n        '531': {'type': 'rain', 'icon': 'showers'},\n        // Snow 600 ~ 622\n        '600': {'type': 'snow', 'icon': 'snow'},\n        '601': {'type': 'snow', 'icon': 'snow'},\n        '602': {'type': 'snow', 'icon': 'snow'},\n        '611': {'type': 'snow', 'icon': 'sleet'},\n        '612': {'type': 'snow', 'icon': 'sleet'},\n        '615': {'type': 'snow', 'icon': 'sleet'},\n        '616': {'type': 'snow', 'icon': 'sleet'},\n        '620': {'type': 'snow', 'icon': 'sleet'},\n        '621': {'type': 'snow', 'icon': 'sleet'},\n        '622': {'type': 'snow', 'icon': 'sleet'},\n        // Atmosphere 701 ~ 781\n        '701': {'type': 'fog', 'icon': 'fog'},\n        '711': {'type': 'fog', 'icon': 'haze'},\n        '721': {'type': 'fog', 'icon': 'haze'},\n        '731': {'type': 'fog', 'icon': 'haze'},\n        '741': {'type': 'fog', 'icon': 'fog'},\n        '751': {'type': 'fog', 'icon': 'fog'},\n        '761': {'type': 'fog', 'icon': 'fog'},\n        '771': {'type': 'fog', 'icon': 'tornado'},\n        '781': {'type': 'fog', 'icon': 'tornado'},\n        // Sun & Clouds 800, 904\n        '800': {'type': 'sun', 'icon': 'sun'},\n        '801': {'type': 'sun', 'icon': 'sun'},\n        '802': {'type': 'clouds', 'icon': 'cloud'},\n        '803': {'type': 'clouds', 'icon': 'cloud'},\n        '804': {'type': 'clouds', 'icon': 'cloud'},\n        // Extreme\n        '900': {'type': 'wind', 'icon': 'tornado'},\n        '901': {'type': 'wind', 'icon': 'tornado'},\n        '902': {'type': 'wind', 'icon': 'tornado'},\n        '903': {'type': 'wind', 'icon': 'thermometer-low'},\n        '904': {'type': 'wind', 'icon': 'thermometer-full'},\n        '905': {'type': 'wind', 'icon': 'wind'},\n        '906': {'type': 'wind', 'icon': 'hail'},\n        // Additional\n        '951': {'type': 'wind', 'icon': 'wind'},\n        '952': {'type': 'wind', 'icon': 'wind'},\n        '953': {'type': 'wind', 'icon': 'wind'},\n        '954': {'type': 'wind', 'icon': 'wind'},\n        '955': {'type': 'wind', 'icon': 'wind'},\n        '956': {'type': 'wind', 'icon': 'tornado'},\n        '957': {'type': 'wind', 'icon': 'tornado'},\n        '958': {'type': 'wind', 'icon': 'tornado'},\n        '959': {'type': 'wind', 'icon': 'tornado'},\n        '960': {'type': 'wind', 'icon': 'tornado'},\n        '961': {'type': 'wind', 'icon': 'tornado'},\n        '962': {'type': 'wind', 'icon': 'tornado'}\n    },\n        flat_list = ['sun', 'wind', 'thermometer-full', 'thermometer-low', 'tornado'];\n\n    this.getCityWeatherType = function (code){\n\n        if (code in weather_condition_codes){\n            return weather_condition_codes[code]['type']\n        } else {\n            return 'others'\n        }\n    },\n    this.getGeoWeatherType = function (code, isNight){\n\n        var icon = weather_condition_codes[code]['icon']\n        if (flat_list.indexOf(icon) < 0){\n            if (code in weather_condition_codes){\n                if (isNight){\n                    return icon + '-moon'\n                } else {\n                    return icon + '-sun'\n                }\n            }\n        } else {\n            return icon\n        }\n    },\n    this.getDistance = function (origin, destination){\n\n        var distance = ~~distanceHelper(origin.lat, origin.lon, destination.lat, destination.lon, 'K')\n        return !!distance ? distance + ' km' : '0 km'\n    }\n})","angular.module('ShinyaApp.msgHelperServices', [])\n.service('syMsgHelper', function(){\n\n    function sinaImgHelper (img_url, size){\n        return img_url.replace(/square|thumbnail|thumb150|bmiddle|mw600|large/, size)\n    }\n    var now = Date.now()\n    // 間隔 60 秒顯示時間\n    this.isShowDate = function (date){\n        if (date - now > 1000 * 60){\n            now = Date.now()\n            return true\n        } else {\n            return false\n        }\n    },\n    // 將文本消息中包含的圖片超鏈接替換\n    this.msgSanitization = function (msg, img_list){\n        var number   = [\n        // 因限制了 1024 個字符，故圖片數目一般不超過以下列表的數字\n                '一', '二', '三', '四', '五', '六', '七', '八', '九', '十', \n                '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '廿', \n                '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '卅', \n                '卅一', '卅二', '卅三', '卅四', '卅五', '卅六', '卅七', '卅八', '卅九' \n            ],\n            list_len = img_list.length;\n        for (var i = 0; i < list_len; i++){\n            msg = msg.replace(img_list[i], '[圖' + (number[i] ? number[i] : ' ' + (i + 1)) + ']')\n        }\n        return msg\n    },\n    // 將圖片超鏈接提取出「縮略圖」、「中圖」、「大圖」，目前僅支持新浪圖庫\n    this.imgSanitization = function (img_list){\n        var cache    = [],\n            list_len = img_list.length;\n        for (var i = 0; i < list_len; i++){\n            if (img_list.indexOf('sinaimg.cn' > 0)){\n                // 新浪圖床\n                cache.push({\n                    'small' : sinaImgHelper(img_list[i], 'square'),\n                    'medium': sinaImgHelper(img_list[i], 'bmiddle'),\n                    'large' : sinaImgHelper(img_list[i], 'large')\n                })\n            } else {\n                cache.push({\n                    'small' : img_list[i],\n                    'medium': img_list[i],\n                    'large' : img_list[i]\n                })\n            }\n        }\n        return cache\n    }\n})","angular.module('ShinyaApp.posHelperServices', [])\n.service('syPosHelper', ['$rootScope', function($rootScope){\n    \n    /*\n     * `this.nowPos`: 當前 `#chat_box` 位置\n     * `this.getBottomPos`: 獲取 `#chat_box` 底部位置\n     * `this.storeNowPos`: 保存 `#chat_box` 當前位置\n     * `this.setNowPos`: 設置 `#chat_box` 當前位置\n     * `this.getBottomPos`: 獲取 `#chat_box` 底部位置\n     * `this.isBottom`: 判斷是否在 `#chat_box` 底部\n     * `this.scrollToBottom`: 滾動到 `#chat_box` 底部\n     *\n     * `isScrolling` 是否正在滾動\n     *      是：若新消息抵達，滾動到底部\n     *      否：根據是否在底部和是否本人發送新消息，判斷是否需要滾動到底部\n     */\n    this.nowPos = 0\n    this.chatBoxHeight = document.getElementById('chat_box').clientHeight\n    this.storeNowPos = function (){\n        this.nowPos = document.getElementById('chat_box').scrollTop\n    }\n    this.getNowPos = function (){\n        return document.getElementById('chat_box').scrollTop\n    }\n    this.getElemTopPos = function (id){\n        return document.getElementById(id).offsetTop\n    }\n    this.getElemBottomPos = function (id){\n        return document.getElementById(id).offsetTop + document.getElementById(id).clientHeight\n    }\n    this.setNowPos = function (nowPos){\n        document.getElementById('chat_box').scrollTop = nowPos\n    }\n    this.getBottomPos = function (){\n        var chatBoxElem = document.getElementById('chat_box')\n        return chatBoxElem.scrollHeight - chatBoxElem.clientHeight\n    }\n    this.isBottom = function (){\n        var chatBoxElem = document.getElementById('chat_box')\n        return (chatBoxElem.scrollHeight - chatBoxElem.clientHeight - chatBoxElem.scrollTop <= 0)\n    }\n    this.scrollToPos = function (pos, isScrollDown){\n\n        // 默認滾動到底部\n        var target_pos = pos || this.getBottomPos()\n        if (!$rootScope.isMobile){\n            angular.element(document.getElementById('chat_box'))\n            .scrollTo(0, target_pos, 171)\n            .then(function(){\n                isScrollDown = false\n            })\n        } else {\n            this.setNowPos(target_pos)\n        }\n    }\n}])","angular.module('ShinyaApp.timeHelperServices', [])\n.service('syTimeHelper', function(){\n\n    // 用戶註冊當日時刻\n    this.partsOfADay = function (hour) {\n\n        if (hour <= 3){\n            return '深夜'\n        } else if (hour <= 6){\n            return '破曉'\n        } else if (hour <= 9){\n            return '早晨'\n        } else if (hour <= 12){\n            return '午前'\n        } else if (hour <= 15){\n            return '午後'\n        } else if (hour <= 18){\n            return '傍晚'\n        } else if (hour <= 21){\n            return '薄暮'\n        } else {\n            return '深夜'\n        }\n    },\n    // 用戶註冊次序號\n    this.getNumero = function (numero){\n\n        if (numero < 77){\n            return 'gold'\n        } else if(numero < 177){\n            return 'aluminum'\n        } else {\n            return 'steel'\n        }\n    },\n    // 判斷「白天」／「夜晚」\n    this.getDaytimeOrNight = function (hour){\n\n        return 6 < hour && hour < 18\n        ? 'daytime'\n        : 'night'\n    },\n    this.getDayMs = function (date){\n\n        var date = new Date(date)\n        return Date.UTC(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate()\n            )\n    }\n    this.isSameDay = function (now, last){\n        \n        return this.getDayMs(now) === this.getDayMs(last)\n    }\n})","angular.module('ShinyaApp.chatController', [])\n.controller('chatController', ['$rootScope', '$scope', '$http', '$timeout', '$window', '$location', '$filter', 'jwtHelper','store', 'syPosHelper', 'syTimeHelper', 'syGeoHelper', 'syMsgHelper', \n    function ($rootScope, $scope, $http, $timeout, $window, $location, $filter, jwtHelper, store, syPosHelper, syTimeHelper, syGeoHelper, syMsgHelper){\n\n    $rootScope.isSubmit = false\n    /*\n     **********\n     * 頁面切換\n     **********\n     *  `$scope.isChatBox`：是否處於 `chat_box` 頁面\n     *  `$scope.isSun`：提示標誌(白天／夜晚)\n     *  `$scope.toggleChatBox`：切換頁面\n     *      移動端：根據滑動切換\n     *          右滑：若處於 `chat_box`，切換到 `info_box`\n     *               若處於 `geo_box` / `news_box / `load_box`，切換到 `info_box`\n     *\n     *          左滑：若處於 `info_box`，切換到 `chat_box`\n     *\n     *      桌面端：根據點擊 `.sunAndMoon` 切換\n     *\n     */\n    syTimeHelper.getDaytimeOrNight(new Date().getHours()) === 'daytime'\n    ? $scope.isSun = true\n    : $scope.isSun = false\n\n    $scope.isChatBox = true\n    $scope.isInfoBox = false\n    $scope.isShowNewsOptions = false\n    $scope.isLoadErr = false\n    function resetNewsSetting(){\n        $scope.isTodayNews = false\n        $scope.isShowNewsOptions = false\n        $scope.isOtherDateNews = false\n    }\n    $scope.toggleChatBox = function (action, isResetNewsSetting){\n\n        if (!!action){\n            // 移動端\n            if (action === 'left'){\n                $scope.isChatBox ? $scope.isChatBox = !$scope.isChatBox : null\n            } else if (action === 'right'){\n                !$scope.isChatBox && $scope.currentPage === 'infoBox'\n                ? $scope.isChatBox = !$scope.isChatBox\n                : $scope.toggleCurrentPage('infoBox')\n                isResetNewsSetting ? resetNewsSetting() : null\n            }\n        } else {\n            // 桌面端\n            // 從 `geo_box` / `news_box` 返回 `chat_box` 時，重置 `user_info_box`\n            $scope.isChatBox ? null : $scope.toggleCurrentPage('infoBox')\n            $scope.isChatBox = !$scope.isChatBox\n            $scope.isSun     = !$scope.isSun\n            isResetNewsSetting ? resetNewsSetting() : null\n        }\n        $scope.now_img_list = []\n        $scope.isZoomIn = false\n        $scope.isShowAtUserBox = false\n    }\n    $scope.currentPage = 'infoBox'\n    $scope.currentPageIs = function (name){\n\n        return $scope.currentPage === name\n    }\n    $scope.toggleCurrentPage = function (name, isShowNewsOptions){\n        if ($scope.currentPage === 'geoBox'){\n            // 重置位置狀態，方便再次獲取\n            $timeout(function (){\n                $scope.geoBox.distance = ''\n            }, 717)\n        }\n        isShowNewsOptions ? resetNewsSetting() : null\n        $timeout(function (){\n            $scope.currentPage = name\n        })\n    }\n    /*\n     **************\n     * 用戶基本信息\n     **************\n     *      `$scope.infoBox`\n     *          title: 加入於／當日天氣\n     *          username: 用戶名\n     *          numero: 註冊序號\n     *          date: 註冊日期\n     *          partsOfADay: 註冊當日時分\n     *          weather: 當日天氣\n     *\n     */\n    var token = store.get('id_token'),\n        decodeToken = jwtHelper.decodeToken(token);\n    // 從 JWT 解碼獲取用戶信息\n    $scope.infoBox = {\n        title      : '加入於',\n        username   : decodeToken.username,\n        numero     : decodeToken.numero,\n        date       : $filter('date')(decodeToken.date, 'yyyy 年 M 月 d 日'),\n        country    : decodeToken.country,\n        partsOfADay: syTimeHelper.partsOfADay(~~($filter('date')(decodeToken.date, 'H'))),\n        weather    : decodeToken.weather.description\n    }\n    $scope.numero = function (numero){\n        return syTimeHelper.getNumero($scope.infoBox.numero)\n    }\n    $scope.getDaytimeOrNight = syTimeHelper.getDaytimeOrNight(~~($filter('date')(decodeToken.date, 'H')))\n    $scope.partWeather = ''\n    $scope.togglePartWeather = function (){\n        if ($scope.partWeather == syGeoHelper.getCityWeatherType(decodeToken.weather.code)){\n            $scope.partWeather = ''\n            $timeout(function (){\n                $scope.infoBox.title = '加入於'\n            }, 777)\n        } else {\n            $scope.partWeather = syGeoHelper.getCityWeatherType(decodeToken.weather.code)\n            $timeout(function (){\n                $scope.infoBox.title = '當日天氣'\n            }, 777)\n        }\n    }\n    /*\n     ********************\n     * 查看其他用戶基本信息\n     ********************\n     *      `$scope.otherUserInfo` 當前查看的「用戶基本信息」\n     *      `$scope.otherUserInfoI` 當前查看的信息 id\n     *      `$scope.isOtherDateNews` 切換「今日」／「日期」\n     *      `$scope.toggleOtherUserInfo` 查看／隱藏「用戶基本信息」\n     *      `$scope.getOtherDateNews` 查看當前用戶註冊當日新聞\n     *\n     */\n    $scope.otherUserInfo = {}\n    $scope.otherUserInfoId = 0\n    $scope.isOtherDateNews = false\n    $scope.toggleOtherUserInfo = function (username, id){\n        if (id === $scope.otherUserInfoId){\n            // 隱藏「用戶基本信息」\n            $scope.otherUserInfoId = 0\n            return;\n        }\n        if (store.get(username)){\n            $scope.otherUserInfo = store.get(username)\n            $scope.otherUserInfoId = id\n        } else {\n            $http\n            .post('/api/getUserInfo', {\n                username: username\n            })\n            .success(function (data, status, headers, config){\n                var info = {\n                    username: username,\n                    numero: data.msg.numero,\n                    country: data.msg.country || 'CN',\n                    date: $filter('date')(data.msg.date, 'yyyy 年 M 月 d 日'),\n                    pure_date: data.msg.date\n                }\n                // 存儲於本地\n                store.set(username, info)\n                $scope.otherUserInfo = info\n                $scope.otherUserInfoId = id\n            })\n            .error(function (data, status, headers, config){\n            })\n        }\n    }\n    $scope.getOtherDateNews = function (username){\n        // 跳轉到「新聞界面」\n        $scope.isChatBox = !$scope.isChatBox\n        $scope.isSun     = !$scope.isSun\n        // 更新新聞設置\n        $scope.isTodayNews = false\n        $scope.isOtherDateNews = true\n        $scope.now_img_list = []\n        $scope.isZoomIn = false\n        $scope.isShowAtUserBox = false\n        // 重置新聞時段 & 上／下一個時段新聞可選性\n        $scope.selectDate = new Date().getHours()\n        isShowPreOrNextHour()\n        // 獲取新聞\n        $scope.getSelectedDateNews(username, $scope.otherUserInfo['pure_date'], true)\n    }\n    /*\n     *****************\n     * 用戶註冊當日新聞\n     *****************\n     *     `localStorage[news_id]` 緩存獲取到的新聞\n     *     `$scope.selectDateNewsBox` 當前展示的新聞，從 `localStorage[news_id]` 獲取\n     *     `$scope.selectDate` 本地時間\n     *     `$scope.toggleTodayNews` 切換今日／當日新聞\n     *     `$scope.selectNextCountry` 設置獲取新聞的國家\n     *     `$scope.preHour` 獲取上一個時間段新聞\n     *          更新：`$scope.selectDate`、`$scope.selectDateNewsBox`\n     *     `$scope.nextHour` 獲取下一個時間段新聞\n     *          更新：`$scope.selectDate`、`$scope.selectDateNewsBox`\n     *     `getSelectedDateNews` 獲取新聞，\n     *         成功：保存到 `localStorage[news_id]`，更新 `$scope.selectDateNewsBox`\n     *         失敗：\n     *             狀態碼 401：JWT 過期，跳轉到首頁\n     *             狀態碼 400：此時段新聞未獲取，`$scope.isNewsExist` -> false\n     */\n    $scope.isTodayNews = false\n    $scope.isNewsExist = false\n    $scope.toggleNewsExist = function (){\n        $scope.isNewsExist = !$scope.isNewsExist\n    }\n    $scope.newsErrMsg = '此時段新聞不存在'\n    $scope.newsDateTitle = '當日新聞'\n    $scope.selectDateNewsBox = []\n    $scope.selectDate = new Date().getHours()\n    $scope.selectCountry = $scope.infoBox.country || 'CN'\n    var timezoneOffset = new Date().getTimezoneOffset() / 60,\n        // 存儲一日，過期刪除\n        one_day_news = store.getNamespacedStore('one-day-news', '-'),\n        getSelectedDateNews = function (callback, username){\n            // 設置十秒期限\n            var loadTimer = $timeout(function (){\n                $scope.isLoadErr = true\n            }, 10000)\n            $http.\n            post('/api/getSelectedDateNews', {\n                username: username,\n                selectDate: $scope.selectDate,\n                selectCountry: $scope.selectCountry,\n                timezoneOffset: timezoneOffset,\n                isTodayNews: $scope.isTodayNews\n            }).\n            success(function (data, status, headers, config){\n                $timeout.cancel(loadTimer)\n                callback('ok', data.msg)\n            }).\n            error(function (data, status, headers, config){\n                if (status === 401){\n                    $scope.quit()\n                } else {\n                    status === 400 ? $timeout.cancel(loadTimer) : null\n                    callback('error', data.msg || '網絡出錯，請稍候再試')\n                }\n            })\n        },\n        storeOneDayNews = function (news_id, news){\n            // 保存「一日」並設置過期時間\n            one_day_news.set(news_id, news)\n            var tomorrow = Date.now() + 86400000\n            store.set('oneDayNewsExpires', syTimeHelper.getDayMs(tomorrow))\n        },\n        statefulGetSelectedDateNews = function (){\n            // 保持「當前狀態（今日／當前／其他用戶）」獲取相應新聞\n            $scope.isOtherDateNews\n            ? $scope.getSelectedDateNews($scope.otherUserInfo.username, $scope.otherUserInfo['pure_date'], true)\n            : $scope.isTodayNews\n                ? $scope.getSelectedDateNews(null, Date.now(), true)\n                : $scope.getSelectedDateNews(null, decodeToken.date)\n        };\n    $scope.toggleTodayNews = function (){\n        if ($scope.isTodayNews){\n            $scope.isTodayNews = false\n            // 重置新聞時段 & 上／下一個時段新聞可選性\n            $scope.selectDate = new Date().getHours()\n            isShowPreOrNextHour()\n            $scope.getSelectedDateNews(null, decodeToken.date)\n        } else {\n            $scope.isTodayNews = true\n            // 重置新聞時段 & 上／下一個時段新聞可選性\n            $scope.selectDate = new Date().getHours()\n            isShowPreOrNextHour()\n            $scope.getSelectedDateNews(null, Date.now(), true)\n        }\n    }\n    $scope.selectNextCountry = function (){\n        var country_list = ['CN', 'HK', 'TW', 'US', 'JP', 'DE', 'FR', 'IN', 'KR', 'RU', 'BR']\n        $scope.selectCountry = country_list[country_list.indexOf($scope.selectCountry) + 1] || 'CN'\n        statefulGetSelectedDateNews()\n    }\n    $scope.getSelectedDateNews = function(username, newsDate, isOneDayNews){\n        // 初始化新聞設置\n        var username = username || decodeToken.username,\n            newsDate = newsDate || Date.now(),\n            isOneDayNews = isOneDayNews || false,\n            news_id = syTimeHelper.getDayMs(newsDate) + $scope.selectCountry + $scope.selectDate,\n            selectDateNews = isOneDayNews ? one_day_news.get(news_id) : store.get(news_id);\n        $scope.isShowNewsOptions = true\n        $scope.newsDateTitle = $scope.isTodayNews ? '今日新聞' : '當日新聞'\n        $scope.isLoadErr = false\n        // 判斷是否從本地獲取新聞\n        if (selectDateNews){\n            $scope.selectDateNewsBox = selectDateNews\n            $scope.currentPage === 'infoBox' ? $scope.toggleCurrentPage('newsBox') : null\n            $scope.isNewsExist ? null : $scope.toggleNewsExist()\n        } else {\n            // 過場動畫\n            $scope.toggleCurrentPage('loadBox')\n            getSelectedDateNews(function (status, news){\n                if (status === 'ok'){\n                    $scope.isNewsExist ? null : $scope.toggleNewsExist()\n                    news\n                    ? isOneDayNews\n                        ? storeOneDayNews(news_id, news) // 存儲一日\n                        : store.set(news_id, news) // 持久存儲\n                    : $scope.isNewsExist ? $scope.toggleNewsExist() : null\n                    $scope.selectDateNewsBox = news\n                    $scope.currentPage === 'loadBox' ?  $scope.toggleCurrentPage('newsBox') : null\n                } else {\n                    $scope.currentPage === 'loadBox' ? $scope.toggleCurrentPage('newsBox') : null\n                    $scope.newsErrMsg = news\n                    $scope.isNewsExist ? $scope.toggleNewsExist() : null\n                }\n            }, username)\n        }\n    }\n    // 判斷是否顯示 上／下一個新聞時段是否為今天「未抓取新聞時段」\n    $scope.isShowPreHour = true \n    $scope.isShowNextHour = true\n    function isShowPreOrNextHour(){\n        var preHour,\n            nextHour;\n        if ($scope.selectDate === 1){\n            preHour = 24,\n            nextHour = $scope.selectDate + 1;\n        } else if($scope.selectDate === 24){\n            preHour = 23,\n            nextHour = 1;\n        } else {\n            preHour = $scope.selectDate - 1,\n            nextHour = $scope.selectDate + 1;\n        }\n        // 判斷上一個時段是否為今天「未抓取新聞時段」\n        $scope.isTodayNews && (preHour > new Date().getHours())\n        ? $scope.isShowPreHour = false\n        : $scope.isShowPreHour = true\n        // 判斷下一個時段是否為今日「未抓取新聞時段」\n        $scope.isTodayNews && (nextHour > new Date().getHours())\n        ? $scope.isShowNextHour = false\n        : $scope.isShowNextHour = true\n    }\n    $scope.preHour = function (){\n        if (!$scope.isShowPreHour) return;\n        if ($scope.selectDate > 1){\n            $scope.selectDate --\n            statefulGetSelectedDateNews()\n        } else {\n            // selectDate === 1\n            $scope.selectDate = 24\n            statefulGetSelectedDateNews()\n        }\n        isShowPreOrNextHour()\n    }\n    $scope.nextHour = function (){\n        if (!$scope.isShowNextHour) return;\n        if ($scope.selectDate < 24){\n            $scope.selectDate ++\n            statefulGetSelectedDateNews()\n        } else {\n            $scope.selectDate = 1\n            statefulGetSelectedDateNews()\n        }\n        isShowPreOrNextHour()\n    }\n    /**********\n     * 設置界面\n     **********\n     *\n     *  `$scope.gotoSettingBox`：跳轉到「設置界面」\n     *  `$scope.quit`：註銷\n     *  `$scope.toggleGeoServices`：開關「位置服務」\n     *\n     */\n    $scope.gotoSettingBox = function (){\n        $scope.currentPage === 'infoBox' ? $scope.toggleCurrentPage('settingBox') : null\n     }\n    $scope.isMuted = !!store.get('isMuted')\n    $scope.toggleMuted = function (){\n        $scope.isMuted = !$scope.isMuted\n        store.set('isMuted', $scope.isMuted)\n    }\n    $scope.quit = function (){\n        store.remove('id_token')\n        store.remove('isGeoServices')\n        // 登記註銷前用戶名\n        $rootScope.lastInfo[0] = decodeToken.username\n        $scope.msgInbox = []\n        $rootScope.socket.disconnect()\n        $location.path('/').replace()\n    }\n    $scope.isGeoServices = store.get('isGeoServices') || decodeToken.isGeoServices\n    $scope.toggleGeoServices = function (){\n        $http.\n        post('/api/toggleGeoServices', {\n            'isGeoServices': !$scope.isGeoServices\n        }).\n        success(function (data, status, headers, config){\n            if (data.msg === 'on'){\n                store.set('isGeoServices', true)\n                // 登記重新登錄後的「下一步動作」\n                $rootScope.lastInfo[1] = 'gotoGeoBox'\n                $scope.$emit('preTurnOnGeoServices', '已開啟服務，請重新登錄')\n            } else {\n                store.set('isGeoServices', false)\n                $scope.$emit('preTurnOffGeoServices', '已關閉服務，請重新登錄')\n            }\n            $scope.quit()\n        }).\n        error(function (data, status, headers, config){\n            status === 401 ? $scope.quit() : null\n        })\n    }\n    /*\n     **************\n     * 地理位置相關\n     **************\n     * \n     * `$scope.geoBox`：地理位置信息\n     * `$scope.weatherBox`：天氣信息\n     * `$scope.isGeoServices`：是否已開啟「位置服務」\n     * `$scope.isSameDay`：判斷是否同一天\n     * `$scope.getGeoServices`：獲取位置信息\n     *\n     */\n    $scope.geoBox = {}\n    $scope.weatherBox = {}\n    $scope.isSameDay = false\n    $scope.getGeoServices = function (){\n        if (!$scope.isGeoServices){\n            // 未開啟「位置服務」\n            $scope.currentPage === 'infoBox' ? $scope.toggleCurrentPage('geoBox') : null\n        } else if ($scope.geoBox.distance) {\n            // 已開啟「位置服務」\n            // 已獲取「位置服務」所需信息，跳轉到 `geo_box`\n            $scope.currentPage === 'infoBox' ? $scope.toggleCurrentPage('geoBox') : null\n        } else {\n            // 未獲取「位置服務」所需信息，跳轉到「過場動畫」\n            if ($scope.currentPage === 'infoBox'){\n                $scope.toggleCurrentPage('loadBox')\n                $scope.isLoadErr = false\n                // 設置十秒期限\n                var loadTimer = $timeout(function (){\n                    $scope.isLoadErr = true\n                }, 10000)\n            }\n            $window.navigator.geolocation.getCurrentPosition(function (pos){\n                $http.\n                post('/api/getGeoServices', {\n                    coords: {\n                        lat: pos.coords.latitude,\n                        lon: pos.coords.longitude\n                    }\n                }).\n                success(function (data, status, headers, config){\n                    $timeout.cancel(loadTimer)\n                    var last_code    = data.msg.last_geo.weather.code,\n                        last_isNight = data.msg.last_geo.weather.isNight,\n                        now_code     = data.msg.now_geo.weather.code,\n                        now_isNight  = data.msg.now_geo.weather.isNight\n                        last_weather = syGeoHelper.getGeoWeatherType(last_code, last_isNight),\n                        now_weather  = syGeoHelper.getGeoWeatherType(now_code, now_isNight);\n                    \n                    $scope.geoBox = data.msg\n                    $scope.geoBox.distance = syGeoHelper.getDistance(data.msg.last_geo, data.msg.now_geo)\n                    $scope.weatherBox = {\n                        'last_weather': last_weather,\n                        'now_weather': now_weather\n                    }\n                    $scope.isSameDay = syTimeHelper.isSameDay($scope.geoBox.now_geo.date, $scope.geoBox.last_geo.date)\n                    $scope.currentPage === 'loadBox' ? $scope.toggleCurrentPage('geoBox') : null\n                    $timeout(function (){\n                        new Vivus('last_weather_svg', {\n                            type: 'delayed',\n                            duration: 50, \n                            file: 'public/img/Climacons_Font/' + last_weather + '.svg'\n                        }, function (){\n                            resetWeatherIcon('last_weather_svg', '#CECECF')\n                        })\n                        new Vivus('now_weather_svg', {\n                            type: 'delayed',\n                            duration: 50, \n                            file: 'public/img/Climacons_Font/' + now_weather + '.svg'\n                        }, function (){\n                            resetWeatherIcon('now_weather_svg', '#000')\n                        })\n                    })\n                }).\n                error(function (data, status, headers, config){\n                    status === 401\n                    ? $scope.quit()\n                    : status === 404\n                        ? $scope.isLoadErr = true\n                        : null\n                })\n            })\n        }\n    }\n    function resetWeatherIcon(id, color){\n        angular.element(document.getElementById(id))\n        .children()\n        .contents()\n        .find('path')\n        .css({\n            stroke: 'inherit',\n            fill  : color || '#000'\n        })\n    }\n    /********\n     * @user\n     ********\n     *\n     *  `$scope.atUser`：當前 @ 的用戶列表\n     *  `$scope.isUserOnline`：判斷用戶是否在線\n     *  `$scope.toggleAtUserBox`：顯示／隱藏「在線用戶列表」\n     *  `$scope.removeAtUser`：移除用戶從 @ 列表\n     *  `$scope.addAtUser`：添加用戶到 @ 列表\n     *\n     */\n    $scope.atUser = []\n    $scope.isShowAtUserBox = false\n    $scope.toggleAtUserBox = function (){\n        $scope.isShowAtUserBox = !$scope.isShowAtUserBox\n    }\n    $scope.isUserOnline = function (username){\n        return $scope.onlineUser.indexOf(username.slice(1)) >= 0\n    }\n    $scope.$watch('msgOutbox.textMsg', function (newVal, oldVal){\n\n        var at_list = newVal.match(/\\@([^\\s\\@]){1,16}/g)\n        if (at_list && at_list !== $scope.atUser){\n            // 是否需要「新增」\n            var at_list_len = at_list.length\n            for (var i = 0; i < at_list_len; i ++){\n                $scope.atUser.indexOf(at_list[i]) < 0 ? $scope.atUser.push(at_list[i]) : null\n            }\n            // 是否需要「刪減」\n            var at_user_len = $scope.atUser.length\n            for(var i = 0; i < at_user_len; i ++){\n                at_list.indexOf($scope.atUser[i]) < 0 ? $scope.atUser.splice(i, 1) : null\n            }\n        } else {\n            $scope.atUser = []\n        }\n        // 顯示「在線用戶列表」\n        if (newVal.match(/\\@$/g)){\n            $scope.isShowAtUserBox = true\n            // 移動端：隱藏鍵盤\n            $rootScope.isMobile\n            ? document.getElementById('chat_submit_input').blur()\n            : null\n        }\n        // 隱藏「在線用戶列表」\n        if (oldVal.match(/\\@$/g) || newVal.match(/\\@([^\\s\\@]){1,16}\\s$/g)){\n            $scope.isShowAtUserBox = false\n            // 移動端：顯示鍵盤\n            $rootScope.isMobile\n            ? document.getElementById('chat_submit_input').focus()\n            : document.getElementById('chat_submit_input').focus()\n        }\n    })\n    $scope.removeAtUser = function (username){\n        var reg = new RegExp('\\\\s\\?' + username + '\\\\s\\?', 'g')\n        $scope.msgOutbox.textMsg = $scope.msgOutbox.textMsg.replace(reg, '')\n    }\n    $scope.addAtUser = function (username){\n        var textMsg = $scope.msgOutbox.textMsg\n\n        textMsg.match(username)\n        ? null\n        : textMsg.match(/\\@$/g)\n            ? $scope.msgOutbox.textMsg = textMsg.concat(username + ' ')\n            : $scope.msgOutbox.textMsg = textMsg.concat('@' + username + ' ')\n        // 若從非「聊天界面」且處於桌面端，切換到「聊天界面」\n        !$rootScope.isMobile && !$scope.isChatBox\n        ? $scope.toggleChatBox(null, true)\n        : null\n    }\n    /*\n     *******************\n     * 文本消息抵達與發送\n     *******************\n     *  \n     *  `$scope.msgInbox`：存儲消息\n     *  `$scope.msgOutbox`：待發送消息\n     *  `onTextMsg`：文本消息抵達\n     *  `$scope.emitTextMsg`：文本消息發送\n     *\n     */\n    $scope.msgInbox = []\n    $scope.msgOutbox = {\n        'textMsg': ''\n    }\n    function onTextMsg(data) {\n        var isMe     = $rootScope.socket.id === data.id,\n            isBottom = syPosHelper.isBottom($scope.isScrollDown) || $scope.isScrollDown;\n        $scope.$apply(function (){\n            $scope.msgInbox.push({\n                'isMe'      : isMe,\n                'isImg'     : data.img_list.length > 0,\n                'isShowDate': syMsgHelper.isShowDate(data.date),\n                'date'      : data.date,\n                'msg'       : syMsgHelper.msgSanitization(data.msg, data.img_list),\n                'username'  : data.username,\n            })\n            data.img_list.length > 0 \n            ? $scope.img_list[data.date] = syMsgHelper.imgSanitization(data.img_list)\n            : null\n        })\n        /* 新消息抵達時：\n         *      當用戶處於 chat_box 底部，滾動到底部\n         *      若不處於 chat_box，新消息提醒\n         *      當用戶回滾查看歷史消息時，新消息提醒\n         *      當用戶發送新消息時，滾動到底部\n         *\n         */\n        if ((isBottom || isMe) && $scope.isChatBox){\n            syPosHelper.scrollToPos()\n        } else if (data.at && data.at.indexOf('@' + decodeToken.username) >= 0){\n            $scope.newMsgNotify('atMsg', data.username, data.date)\n        } else if (!isMe && !$scope.contentItem){\n            $scope.newMsgNotify('newMsg', '新消息')\n        }\n    }\n    $scope.emitTextMsg = function (){\n\n        var at_list = $scope.msgOutbox.textMsg.match(/\\@([^\\s\\@]){1,16}/g)\n        // 屏蔽純空白輸入，由於 ngInput 默認 trim，故只需判斷是否為空，無需判斷空白字符\n        if ($scope.msgOutbox.textMsg !== ''){\n            $rootScope.socket.emit('textMsg', {\n                'id'      : $rootScope.socket.id,\n                'msg'     : $scope.msgOutbox.textMsg,\n                'username': $scope.infoBox.username,\n                'at'      : at_list\n            })\n            // 重置 `$scope.atUser` & `$scope.msgOutbox.textMsg`\n            $scope.atUser = ''\n            $scope.msgOutbox.textMsg = ''\n        }\n        $scope.isZoomIn = false\n        $scope.isShowAtUserBox = false\n    }\n    /*\n     **************\n     * Socket.IO\n     **************\n     */\n    function listenSIO(){\n        $rootScope.socket.on('connect', function (){\n            // 獲取最近的十條消息\n            $rootScope.socket.emit('latestMsg', $scope.msgInbox.length >= 0)\n            $rootScope.socket.on('latestMsg', function (data){\n                $scope.msgInbox = []\n                var data_len = data.length\n                for (var i = 0; i < data_len; i++){\n                    $scope.$apply(function (){\n                        $scope.msgInbox.push({\n                            'isMe'      : decodeToken.username === data[i].username,\n                            'isImg'     : data[i].img_list.length > 0,\n                            'isShowDate': (i === 0) ? true : false,\n                            'date'      : data[i].date,\n                            'msg'       : syMsgHelper.msgSanitization(data[i].msg, data[i].img_list),\n                            'username'  : data[i].username\n                        })\n                        data[i].img_list.length > 0\n                        ? $scope.img_list[data[i].date] = syMsgHelper.imgSanitization(data[i].img_list)\n                        : null\n                    })\n                }\n            })\n        })\n        /* 新文本消息抵達 */\n        $rootScope.socket.on('textMsg', function (msg){\n            onTextMsg(msg)\n        })\n         /* 有用戶加入 */\n        $rootScope.socket.on('userJoin', function (msg){\n            $scope.onUserIO(msg)\n        })\n         /* 有用戶退出 */\n        $rootScope.socket.on('disconnect', function (msg){\n            $scope.onUserIO(msg)\n        })\n    }\n    function connectSIO(){\n        $rootScope.socket = io('', {\n            'query': 'token=' + token,\n            'secure': true\n        })\n        listenSIO()\n    }\n    function reconnectSIO(){\n        $rootScope.socket.disconnect()\n        $rootScope.socket.connect('', {\n            'query': 'token=' + token,\n            'secure': true\n        })\n        listenSIO()\n    }\n    // init\n    $rootScope.socket\n    ? reconnectSIO()\n    : connectSIO()\n    // 處理登錄後的「下一步動作」\n    var lastUser = $rootScope.lastInfo[0],\n        nextStep = $rootScope.lastInfo[1];\n    if (lastUser && lastUser !== decodeToken.username){\n        $rootScope.lastInfo = []\n        $window.location.reload()\n    } else if (nextStep && nextStep === 'gotoGeoBox'){\n        // 開啟「位置服務」後登錄自動跳轉到 `geoBox`\n        $rootScope.lastInfo = []\n        $scope.isChatBox = !$scope.isChatBox\n        $scope.isSun     = !$scope.isSun\n        $scope.getGeoServices()\n    } else {\n        $rootScope.lastInfo = []\n    }\n    // 清除過期的新聞\n    function removeOneDayNews(){\n        var ls = $window.localStorage,\n            len = localStorage.length,\n            reg = /^one-day-news-/,\n            j = 0;\n        for (var i = 0; i < len; i++){\n            reg.test(ls.key(j))\n            ? store.remove(ls.key(j))\n            : j ++\n        }\n    }\n    store.get('oneDayNewsExpires') < Date.now()\n    ? removeOneDayNews()\n    : null\n}])","angular.module('ShinyaApp.forgotController', [])\n.controller('forgotController', ['$scope', '$rootScope', '$http', '$timeout', '$location', function($scope, $rootScope, $http, $timeout, $location){\n\n    $rootScope.isSubmit = false\n    /*\n     **********\n     * 消息提醒\n     **********\n     *\n     *  `$scope.isMsgNotify`：是否為消息提醒\n     *  `$scope.errMsg`：錯誤消息\n     *  `$scope.okMsg`：成功消息\n     *  `$scope.msgNotify`：觸發消息提醒\n     *\n     */\n    $scope.isMsgNotify = false\n    $scope.errMsg = ''\n    $scope.okMsg = ''\n    $scope.msgNotify = function (type, msg){\n        if (type === 'error'){\n            $scope.input_shake_animate = true\n            $scope.errMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.errMsg = ''\n                $scope.input_shake_animate = false\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else if (type === 'ok'){\n            $scope.okMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.okMsg = ''\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else {\n            console.error('[TypeError]: Not `error` or `ok`')\n        }\n    }\n    /*\n     **********\n     * 忘記密碼\n     **********\n     *  `$scope.forgot`：存儲用戶需提交的信息\n     *  `$scope.step`：當前處於第幾步\n     *  `$scope.returnToPreviousStep`：返回上一步\n     *  `$scope.gotoStepThree`：跳轉到第三步\n     *  `$scope.forgotEmailSubmit`：提交「電郵地址」\n     *  `$scope.forgotCodeSubmit`：提交「驗證碼」和「新密碼」\n     */\n    $scope.forgot = {}\n    $scope.step = 1\n    $scope.returnToPreviousStep = function (){\n        $scope.step === 1\n        ? $location.path('/')\n        : $scope.step = $scope.step - 1\n    }\n    $scope.gotoStepThree = function (){\n        $scope.step = 3\n        $scope.msgNotify('ok', '請輸入新密碼')\n    }\n    $scope.forgotEmailSubmit = function (){\n\n        $http.\n        post('/forgot_email', {\n            \"email\": $scope.forgot.email\n        }).\n        success(function (data, status, headers, config){\n            $scope.step = 2\n            $scope.msgNotify('ok', data.msg)\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.forgot = {}\n    }\n    $scope.forgotCodeSubmit = function (){\n\n        $http.\n        post('/forgot_code', {\n            'code': $scope.forgot.code,\n            'password': $scope.forgot.password\n        }).\n        success(function (data, status, headers, config){\n            $scope.msgNotify('ok', data.msg)\n            $timeout(function (){\n                $location.path('/')\n            }, 2000)\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n            $timeout(function (){\n                $scope.returnToPreviousStep()\n            }, 717)\n        })\n        $scope.forgot = {}\n    }\n}])","angular.module('ShinyaApp.submitController', [])\n.controller('submitController', ['$scope', '$rootScope', '$http', '$timeout', '$location', '$route', '$window', 'jwtHelper', 'store',\n    function ($scope, $rootScope, $http, $timeout, $location, $route, $window, jwtHelper, store){\n\n    $rootScope.isSubmit = true\n    /*\n     **********\n     * 消息提醒\n     **********\n     *\n     *  `$scope.isMsgNotify`：是否為消息提醒\n     *  `$scope.errMsg`：錯誤消息\n     *  `$scope.okMsg`：成功消息\n     *  `$scope.msgNotify`：觸發消息提醒\n     *\n     */\n    $scope.isMsgNotify = false\n    $scope.errMsg = ''\n    $scope.okMsg = ''\n    $scope.msgNotify = function (type, msg){\n        if (type === 'error'){\n            $scope.input_shake_animate = true\n            $scope.errMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.errMsg = ''\n                $scope.input_shake_animate = false\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else if (type === 'ok'){\n            $scope.okMsg = msg\n            $scope.isMsgNotify = true\n            $timeout(function (){\n                $scope.okMsg = ''\n                $scope.isMsgNotify = false\n            }, 1717)\n        } else {\n            console.error('[TypeError]: Not `error` or `ok`')\n        }\n    }\n    /*\n     **********\n     * 驗證相關\n     **********\n     */\n    // token 腐爛，觸發提醒\n    if (!!store.get('id_token')){\n        if (jwtHelper.isTokenExpired(store.get('id_token'))){\n            // 此時 $scope.msgNotify 方法還沒定義\n            $timeout(function (){\n                $scope.msgNotify('ok', '請重新登錄')\n            }, 0)\n        }\n    }\n    // 監聽開啟／關閉「位置服務」\n    $scope.$on('turnOnGeoServices', function (msg){\n        $timeout(function (){\n            $scope.msgNotify('ok', '已開啟服務，請重新登錄')\n        }, 0)\n    })\n    $scope.$on('turnOffGeoServices', function (msg){\n        $timeout(function (){\n            $scope.msgNotify('ok', '已關閉服務，請重新登錄')\n        }, 0)\n    })\n\n    /*\n     **********\n     * 頁面切換\n     **********\n     */\n    $scope.isLogin = true;\n    $scope.toggleSubmit = function (){\n        $scope.isLogin = !$scope.isLogin\n    }\n    /*\n     ************\n     * 登陸／註冊\n     ************\n     *\n     *  `$scope.login`：緩存登陸信息\n     *  `$scope.register`：緩存註冊信息\n     *  `$scope.loginSubmit`：處理登陸\n     *  `$scope.registerSubmit`：處理註冊\n     *\n     */\n    $scope.login = {}\n    $scope.register = {}\n    $scope.loginSubmit = function (){\n\n        $http.\n        post('/login', {\n            \"user\": $scope.login.user,\n            \"password\": $scope.login.password\n        }).\n        success(function (data, status, headers, config){\n            store.set('id_token', data.token)\n            $location.path('/chat').replace()\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.login = {}\n    }\n    $scope.registerSubmit = function (){\n        $http.\n        post('/register', {\n            \"username\": $scope.register.username,\n            \"email\": angular.lowercase($scope.register.email), \n            \"password\": $scope.register.password\n        }).\n        success(function (data, status, headers, config){\n            $scope.msgNotify('ok', data.msg)\n            // switch to [login]\n            $scope.toggleSubmit()\n        }).\n        error(function (data, status, headers, config){\n            $scope.msgNotify('error', data.msg)\n        })\n        $scope.register = {}\n    }\n}])\n"],"sourceRoot":"/source/"}